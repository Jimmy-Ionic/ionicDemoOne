!function(){"use strict";function e(e,t,a,n,o,i,s){function r(){console.log("done"),console.log(t.unReadMsgCount)}function c(){console.log("循环获取获取消息error")}function l(){}function u(){o.goBack()}function p(){i.go("recMessage")}t.unReadMsgCount=0,t.goBack=u,t.toMessagePage=p;var d="";s.setServerInfo();var m=a(function(){n.get(d).then(function(e){1==e.data.success&&(t.unReadMsgCount=e.data.data.count)},function(e){})},3e5);m.then(r,c,l)}function t(e,t,a,n,o){a.ready(function(){if(window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault(),window.codePush){var t;e.downloadMsg="";var a=function(e){t.close(),o.alert({title:"更新提示",template:"更新失败！"})},n=function(){t.close(),o.alert({title:"更新提示",template:"更新成功！"}).then(function(){codePush.restartApplication()})},i=function(e){return(e/1024).toFixed(2)},s=function(t){e.downloadMsg=i(t.receivedBytes)+"kb 共"+i(t.totalBytes)+"kb"},r=function(e){e.install(n,a,{installMode:InstallMode.ON_NEXT_RESUME,minimumBackgroundDuration:120,mandatoryInstallMode:InstallMode.ON_NEXT_RESTART})},c=function(n){n&&!n.failedInstall&&o.confirm({title:"更新提示",template:"有可用的新版本，是否需要更新？",cancelText:"否",okText:"是"}).then(function(i){i&&(t=o.show({template:"<span>正在下载 {{downloadMsg}}</span>",scope:e,title:"更新提示"}),n.download(r,a,s))})};window.codePush.checkForUpdate(c,a)}}),a.registerBackButtonAction(function(e){e.preventDefault();var a=t.path();return"/homePageNew"===a||"/login"===a?ionic.Platform.exitApp():n.backView?n.goBack():ionic.Platform.exitApp(),!1},101)}function a(e,t,a){a.platform.ios.tabs.style("standard"),a.platform.ios.tabs.position("bottom"),a.platform.android.tabs.style("standard"),a.platform.android.tabs.position("standard"),a.platform.ios.navBar.alignTitle("center"),a.platform.android.navBar.alignTitle("left"),a.platform.ios.backButton.previousTitleText("").icon("ion-ios-arrow-thin-left"),a.platform.android.backButton.previousTitleText("").icon("ion-android-arrow-back"),a.platform.ios.views.transition("ios"),a.platform.android.views.transition("android"),t.otherwise("/login")}a.$inject=["$stateProvider","$urlRouterProvider","$ionicConfigProvider"],e.$inject=["$scope","$rootScope","$interval","$http","$ionicHistory","$state","LoginService"],angular.module("app",["ionic","ngStorage","ngFileUpload","ng-echarts","ngCordova","app.login","app.home","app.savedData","app.waitForWork","app.assessment","app.planDetails","app.assessmentStatus","app.assessmentStatusDetails","app.addAssessment","app.addAssessmentMap","app.gridCheck","app.problemFeedback","app.problemFeedbackDetails","app.account","app.accountDetails","app.history","app.map","app.appReceivedMessage","app.messageContent","app.setting","app.setNet","app.commonHttpService","app.commonMap"]).run(t).config(a).constant("SYS_INFO",{SERVER_PATH:"http://172.72.100.240",SERVER_PORT:"8090",VERSION:"1.0.0",DIGITS:2}).controller("AppController",e),e.$inject.LoginService,t.$inject=["$rootScope","$location","$ionicPlatform","$ionicHistory","$ionicPopup"]}(),function(){"use strict";angular.module("app.account",[])}(),function(){"use strict";angular.module("app.assessment",[])}(),function(){"use strict";angular.module("app.gridCheck",[])}(),function(){"use strict";angular.module("app.history",[])}(),function(){"use strict";angular.module("app.home",[])}(),function(){"use strict";angular.module("app.login",[])}(),function(){"use strict";angular.module("app.map",[])}(),function(){"use strict";angular.module("app.appReceivedMessage",[])}(),function(){"use strict";angular.module("app.problemFeedback",[])}(),function(){"use strict";angular.module("app.setNet",[])}(),function(){"use strict";angular.module("app.setting",[])}(),function(){"use strict";angular.module("app.waitForWork",[])}(),function(){"use strict";angular.module("app.accountDetails",[])}(),function(){"use strict";angular.module("app.addAssessment",[])}(),function(){"use strict";angular.module("app.assessmentStatus",[])}(),function(){"use strict";angular.module("app.assessmentStatusDetails",[])}(),function(){"use strict";angular.module("app.planDetails",[])}(),function(){"use strict";angular.module("app.commonHttpService",[])}(),function(){"use strict";angular.module("app.commonMap",[])}(),function(){"use strict";angular.module("app.savedData",[])}(),function(){"use strict";angular.module("app.messageContent",[])}(),function(){"use strict";angular.module("app.problemFeedbackDetails",[])}(),function(){"use strict";angular.module("app.addAssessmentMap",[])}(),function(){"use strict";function e(e){function t(){}t()}angular.module("app.account").controller("AccountController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e){e.state("account",{url:"/account",templateUrl:"templates/account/account.html"})}angular.module("app.account").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){var t={};return t}angular.module("app.account").service("AccountService",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,t,a,n,o,i,s){function r(){for(var e=0;e<10;e++);}function c(e){a.go("planDetails",{planDetailsData:e,fromWhere:"assessment"})}var l=this;l.title="综合考核",l.titleController={},l.toPlanDetails=c,l.planList=[{id:"cc07edd7-892a-4bf0-96dc-52301699663c",workName:"6月份考核计划",startTime:"2017/6/1",endTime:"2017/6/1"},{id:"cc07edd7-892a-4bf0-96dc-52301699663c",workName:"7月份考核计划",startTime:"2017/6/1",endTime:"2017/6/5"},{id:"cc07edd7-892a-4bf0-96dc-52301699663c",workName:"8月份考核计划",startTime:"2017/6/1",endTime:"2017/6/5"},{id:"cc07edd7-892a-4bf0-96dc-52301699663c",workName:"9月份考核计划",startTime:"2017/6/1",endTime:"2017/6/5"},{id:"cc07edd7-892a-4bf0-96dc-52301699663c",workName:"10月份考核计划",startTime:"2017/6/1",endTime:"2017/6/5"},{id:"cc07edd7-892a-4bf0-96dc-52301699663c",workName:"11月份考核计划",startTime:"2017/6/1",endTime:"2017/6/1"},{id:"cc07edd7-892a-4bf0-96dc-52301699663c",workName:"12月份考核计划",startTime:"2017/6/1",endTime:"2017/6/1"},{id:"4",workName:"9月份考核计划",startTime:"2017/6/1",endTime:"2017/6/5"},{id:"4",workName:"9月份考核计划",startTime:"2017/6/1",endTime:"2017/6/5"},{id:"4",workName:"9月份考核计划",startTime:"2017/6/1",endTime:"2017/6/5"},{id:"4",workName:"9月份考核计划",startTime:"2017/6/1",endTime:"2017/6/5"},{id:"4",workName:"9月份考核计划",startTime:"2017/6/1",endTime:"2017/6/5"},{id:"4",workName:"9月份考核计划",startTime:"2017/6/1",endTime:"2017/6/5"},{id:"4",workName:"9月份考核计划",startTime:"2017/6/1",endTime:"2017/6/5"},{id:"4",workName:"9月份考核计划",startTime:"2017/6/1",endTime:"2017/6/5"},{id:"4",workName:"9月份考核计划",startTime:"2017/6/1",endTime:"2017/6/5"},{id:"4",workName:"9月份考核计划",startTime:"2017/6/1",endTime:"2017/6/5"},{id:"4",workName:"9月份考核计划",startTime:"2017/6/1",endTime:"2017/6/5"},{id:"4",workName:"9月份考核计划",startTime:"2017/6/1",endTime:"2017/6/5"},{id:"4",workName:"9月份考核计划",startTime:"2017/6/1",endTime:"2017/6/5"},{id:"4",workName:"9月份考核计划",startTime:"2017/6/1",endTime:"2017/6/5"}],r()}angular.module("app.assessment").controller("AssessmentController",e),e.$inject=["$rootScope","$scope","$state","AssessmentService","$ionicLoading","$ionicPopup","$timeout","$ionicHistory"]}(),function(){"use strict";function e(e){e.state("assessment",{url:"/assessment",templateUrl:"templates/assessment/assessment.html"})}angular.module("app.assessment").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,a){function n(e,t){var n=""+e;a.getCommonData(n,t)}var o={getPlanList:n};return o}angular.module("app.assessment").service("AssessmentService",e),e.$inject=["$http","SYS_INFO","MyHttpService"]}(),function(){"use strict";function e(e,t,a,n,o,i,s,r){function c(){var e=n.getGridCheckQuestionCodeArray();e?m.questionCode=e:m.questionCode=["道路不干净","垃圾桶占路"]}function l(){t.go("commonMap",{data:{},from:"gridCheck"})}function u(){var e={quality:50,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.CAMERA,allowEdit:!0,encodingType:Camera.EncodingType.JPEG,targetWidth:200,targetHeight:200,popoverOptions:Camera.PopoverOptions,saveToPhotoAlbum:!0,correctOrientation:!0};$cordovaCamera.getPicture(e).then(function(e){i.alert({title:"sdda",template:"deviceready获取图片"+e+" "+(new moment).unix()});var t=document.getElementById("img");t.src="data:image/jpeg;base64,"+e,m.picName=moment().format("YYYY-MM-DD-HH:mm:ss")+".jpg",m.picData=e,console.log(m.picName)},function(e){i.alert({title:"照片获取失败，请重新拍照"})})}function p(){o.getAddressByGPS(function(t){m.locationObj.district=t.district,m.locationObj.street=t.street,e.$apply()})}function d(){n.uploadGridCheckData()}var m=this;m.title="网格化巡检",m.picPath="http://www.runoob.com/wp-content/uploads/2014/06/angular.jpg",m.picData="",m.picName="",m.pickPositon=a.position,m.selectedQuesCode="",m.questionCode=[],m.question="",m.locationObj={district:"",street:""},m.fun={toGridCheckMap:l,takeGridCheckPicture:u,getGridCheckLocation:p,uploadGridCheckData:d},c()}angular.module("app.gridCheck").controller("GridCheckController",e),e.$inject=["$scope","$state","$stateParams","GridCheckService","CommonMapService","$ionicPopup","$ionicLoading","$cordovaFileTransfer"]}(),function(){"use strict";function e(e){e.state("gridCheck",{url:"/gridCheck",params:{position:[]},templateUrl:"templates/gridCheck/gridCheck.html"})}angular.module("app.gridCheck").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,a){function n(){return e.getCommonData()}function o(e){a.show({template:'<div class="common-loading-dialog-center">  <ion-spinner icon="ios"></ion-spinner>&nbsp;&nbsp;  <span>数据上传中...</span></div>',duration:1e4});var t=new FileUploadOptions,n={facilityIdentify:"217ae60e5bc746f",cyberkeyCode:"AQOhlmsQAAKgCoi",tenantId:1};t.params=n,$cordovaFileTransfer.upload(encodeURI(url),e,t).then(function(e){console.log(JSON.stringify(e.response)),console.log("success"),a.hide()},function(e){console.log(JSON.stringify(e)),console.log("fail"),a.hide()},function(e){})}var i={getGridCheckQuestionCodeArray:n,uploadGridCheckData:o};return i}angular.module("app.gridCheck").service("GridCheckService",e),e.$inject=["MyHttpService","$ionicPopup","$ionicLoading"]}(),function(){"use strict";function e(e,t,a){function n(){console.log(s.thisYeah+"***"+s.thisMonth);for(var e=0;e<15;e++)s.historyList[e]={id:"1",workName:"6月份考核计划",year:"2017年",month:"六月"};for(var e=0;e<12;e++)s.monthArray[e]=e+1;console.log(s.monthArray);for(var e=0;e<5;e++)s.yeahArray[e]=s.thisYeah-e}function o(e){t.go("planDetails",{assessmentData:e,fromWhere:"history"})}function i(){console.log(s.selectedMonth+"**"+s.selectedYeah+"**"+s.keyword),a.getHistoryDataByCondition(s.selectedYeah,s.selectedMonth,s.keyword)}var s=this;s.title="历史考核记录",s.fun={toPlanDetails:o,getHistoryDataByCondition:i},s.toPlanDetails=o,s.historyList=[],s.yeahArray=[],s.monthArray=[],s.thisYeah=moment().format("YYYY"),s.thisMonth=moment().format("M"),s.keyword="",s.selectedYeah="",s.selectedMonth="",n()}angular.module("app.history").controller("HistoryController",e),e.$inject=["$scope","$state","HistoryService"]}(),function(){"use strict";function e(e){e.state("history",{url:"/history",templateUrl:"templates/history/history.html"})}angular.module("app.history").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){function t(t){var a="";return e.getCommonData(a)}function a(t,a,n){var o="";return e.getCommonData(o)}var n={getHistoryData:t,getHistoryDataByCondition:a};return n}angular.module("app.history").service("HistoryService",e),e.$inject=["MyHttpService"]}(),function(){"use strict";function e(e,t,a,n,o,i,s,r,c,l){function u(){r.getWeather(function(e){$.weather=e}),$.savedData=i.getSavedUploadedData(),$.savedData&&($.hasSavedData=!0,$.saveDataNum=$.savedData.length)}function p(){n.go("waitForWork")}function d(){n.go("assessment")}function m(){n.go("gridCheck")}function f(){n.go("problemFeedback")}function g(){n.go("account")}function v(){n.go("history")}function h(){n.go("map")}function P(){n.go("recMessage")}function S(){n.go("setting")}function A(){n.go("savedData",{savedData:$.savedData})}var $=this;$.title="请选择工作",$.hasSavedData=!0,$.saveDataNum="20",$.savedData={},$.isCommonAccount=e.isCommonAccount,$.weather={},$.msgCount=e.unReadMsgCount,$.homeWorkController={toWaitForWork:p,toComprehensiveAssessment:d,toGridCheck:m,toProblemFeedback:f,toAccount:g,toHistory:v,toMap:h,toMessage:P,toSettings:S,toSavedData:A},u()}angular.module("app.home").controller("HomeController",e),e.$inject=["$rootScope","$localStorage","$scope","$state","$filter","HomeService","SYS_INFO","GetWeatherService","$stateParams","$interval"]}(),function(){"use strict";function e(e){e.state("home",{url:"/home",cache:!0,templateUrl:"templates/home/home.html"})}angular.module("app.home").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,a,n,o){function i(){return e.savedData?e.savedData:null}var s={getSavedUploadedData:i};return s}function t(e,t){function a(t){e.get(o).then(function(e){e.data?(i.weatherDate=moment().format("MM月DD日"),i.address="青岛",i.temperature=n(e.data),i.weather=e.data.data.forecast[0].type,t(i)):(i.weatherDate=moment().format("MM月DD日"),i.address="青岛",i.temperature="20度",i.weather="晴",t(i))},function(e){i.weatherDate=moment().format("MM月DD日"),i.address="青岛",i.temperature="20度",i.weather="晴",t(i)}),console.log(i)}function n(e){if(e.data){var t=e.data.forecast[0].low.substring(3,5),a=e.data.forecast[0].high.substring(3,5),n=t+"~"+a+"度";return n}return""}var o=t.SERVER_PATH+":"+t.SERVER_PORT+"/hwweb/Weather/WeatherJson.action",i={},s={getWeather:a};return s}angular.module("app.home").service("GetWeatherService",t).factory("HomeService",e),e.$inject=["$localStorage","$http","SYS_INFO","$interval","$rootScope"],t.$inject=["$http","SYS_INFO","$interval"]}(),function(){"use strict";function e(e,t,a){function n(){t.go("setNet",{imei:e.imei})}function o(){a.login(e.info.userName,e.info.password,e.imei,e.isCommonAccount,e.info.isRemAccountAndPwd,e.info)}e.doLogin=o,e.setNetAddress=n,e.isCommonAccount=!1,e.userInfo=a.getUserInfo(),e.imei="123456",e.info={userName:e.userInfo.userName,password:e.userInfo.password,isRemAccountAndPwd:e.userInfo.isRemAccountAndPwd}}var t=angular.module("app.login");t.controller("LoginController",e),e.$inject=["$scope","$state","LoginService"]}(),function(){function e(e){e.state("login",{url:"/login",templateUrl:"templates/login/login.html"})}angular.module("app.login").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,a,n,o,i,s,r,c){function l(e,i,r,c,l,d){o.show({template:"正在登录..."}),n(function(){o.hide()},3e4),i=hex_md5(i);var m="/hwweb/AppUser/userLogin.action?";switch(c){case!1:t.get(a.SERVER_PATH+":"+a.SERVER_PORT+m+"account="+e+"&password="+i+"&imei="+r).then(function(e){s.isCommonAccount=!1,u(e,l,d)},function(e){p(e)});break;case!0:t.get(a.SERVER_PATH+":"+a.SERVER_PORT+m+"account="+e+"&password="+i).then(function(e){s.isCommonAccount=!0,u(e,l,d)},function(e){p(e)})}}function u(e,t,a){console.log(e),"1"==e.data.success?n(function(){t?m(a):v(),d(e.data.data[0])},100).then(function(){o.hide(),c.go("home")}):(o.hide(),i.alert({title:e.data.msg}).then(function(e){}))}function p(e){o.hide(),i.alert({title:"登陆失败",template:e.data}).then(function(e){})}function d(e){e?(s.userId=e.id,s.userName=e.name,s.userOrg=e.org):(s.userId="",s.userName="",s.userOrg="")}function m(t){var a={userName:"",password:"",isRemAccountAndPwd:!1};t&&(a.userName=t.userName,a.password=t.password,a.isRemAccountAndPwd=t.isRemAccountAndPwd),e.userInfo=a}function f(){function e(){return r.getUUID()}document.addEventListener("deviceready",e,!1)}function g(){var t={userName:"",password:"",isRemAccountAndPwd:!1};return e.userInfo&&(t.userName=e.userInfo.userName,t.password=e.userInfo.password,t.isRemAccountAndPwd=e.userInfo.isRemAccountAndPwd),t}function v(){delete e.userInfo}function h(){var t={SERVER_PATH:"",SERVER_PORT:""};e.serverInfo?(a.SERVER_PATH=e.serverInfo.SERVER_PATH,a.SERVER_PORT=e.serverInfo.SERVER_PORT):(t.SERVER_PATH=a.SERVER_PATH,t.SERVER_PORT=a.SERVER_PORT,e.serverInfo=t)}var P={login:l,getUserInfo:g,setServerInfo:h,getImei:f};return P}angular.module("app.login").service("LoginService",e),e.$inject=["$localStorage","$http","SYS_INFO","$timeout","$ionicLoading","$ionicPopup","$rootScope","$cordovaDevice","$state"]}(),function(){"use strict";function e(e,t,a,n){function o(){i()}function i(){r.map=a.initMap(r.mapPositionObj.position),r.markerPerson=new AMap.Marker,r.mapPositionObj.roadPositionArray.length<=0?(r.marker=new AMap.Marker({position:r.mapPositionObj.position,icon:new AMap.Icon({size:new AMap.Size(32,32),content:'<img src="/www/assets/global/img/location.png" />'})}),r.marker.setMap(r.map),r.map.setCenter(r.mapPositionObj.position)):(r.polyline=new AMap.Polyline({path:r.mapPositionObj.roadPositionArray,strokeColor:"#1C8B08",strokeWeight:5}),r.polyline.setMap(r.map),r.map.setZoom(17),r.centerPositionNum=parseInt(r.mapPositionObj.roadPositionArray.length/2),r.map.setCenter(r.mapPositionObj.roadPositionArray[centerPositionNum]))}function s(){var e="";n.getCommonData(e,function(e){r.accountList=e[0],r.spinnerShow=!0})}var r=this;r.data={},r.title="地图查询",r.spinnerShow=!1,r.queryObj={account:"",keyword:""},r.accountList=[{account:"全部",selected:!0},{account:"公厕",selected:!0},{account:"街道",selected:!0},{account:"车辆",selected:!1},{account:"垃圾桶",selected:!1},{account:"收集站",selected:!1}],r.accountAddressData=[{name:"百度1",position:[],roadPositionArray:[]},{name:"百度2",position:[],roadPositionArray:[]},{name:"百度3",position:[],roadPositionArray:[]},{address:"百度4",position:[],roadPositionArray:[]}],r.map,r.marker,r.markerPerson,r.polyline,r.centerPositionNum=0,r.mapPositionObj={address:"市南软件园2号楼",position:[120.41317,36.07705],roadPositionArray:[]},r.fun={getAccountsPostionData:s},o()}angular.module("app.map").controller("MapController",e),e.$inject=["$scope","GetWeatherService","CommonMapService","MyHttpService"]}(),function(){"use strict";function e(e){e.state("map",{url:"/map",templateUrl:"templates/map/map.html"})}angular.module("app.map").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){function t(){}var a={initMap:t};return a}angular.module("app.map").service("MapService",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,t){function a(){}function n(){}function o(e){}var i=this;i.title="已收到消息",i.refreshMessageList=n,i.openMsgContent=o,i.messages=[{title:"测试消息1",status:0,date:"2017/8/10",content:"有要事相讨~",attachmentAddress:"http://bpic.588ku.com/element_origin_min_pic/01/42/49/94573d7d67103c2.jpg"},{title:"测试消息1",status:1,date:"2017/8/10",content:"有要事相讨~",attachmentAddress:"http://bpic.588ku.com/element_origin_min_pic/01/42/49/94573d7d67103c2.jpg"},{title:"测试消息1",status:0,date:"2017/8/10",content:"有要事相讨~",attachmentAddress:"http://bpic.588ku.com/element_origin_min_pic/01/42/49/94573d7d67103c2.jpg"},{title:"测试消息1",status:1,date:"2017/8/10",content:"有要事相讨~",attachmentAddress:"http://bpic.588ku.com/element_origin_min_pic/01/42/49/94573d7d67103c2.jpg"}],a()}angular.module("app.appReceivedMessage").controller("MessageController",e),e.$inject=["$scope","MessageService"]}(),function(){"use strict";function e(e){e.state("recMessage",{url:"/recMessage",templateUrl:"templates/message/recMessage.html"})}angular.module("app.appReceivedMessage").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){function a(){var a=t.SERVER_PATH+":"+t.SERVER_PORT;e.get(a,function(e){if(1==e.data.success){var t=e.date.data;return t}},function(e){})}var n={getMessage:a};return n}angular.module("app.appReceivedMessage").service("MessageService",e),e.$inject=["$http","SYS_INFO"]}(),function(){"use strict";function e(e,t,a,n,o){function i(){for(var e=0;e<15;e++)l.problemList[e]={id:"6",institutionsName:"山东路",type:"道路",status:"1",address:"燕儿岛路",question:"公厕不净",position:[120.41317,36.07705]}}function s(e){c(e)}function r(e){0==e.status?c(e):a.alert({title:"提示",template:"您已经反馈过问题啦"}).then(function(e){})}function c(e){t.go("problemFeedbackDetails",{problemItem:e,fromWhere:"problemFeedbackDetails"})}var l=this;l.title="已收到的检查问题",l.fun={checkProblemDetails:s,feedbackProblem:r},l.problemList=[],i()}angular.module("app.problemFeedback").controller("ProblemFeedbackController",e),e.$inject=["$rootScope","$state","$ionicPopup","$scope","ProblemFeedbackService"]}(),function(){"use strict";function e(e){e.state("problemFeedback",{url:"/problemFeedback",templateUrl:"templates/problemFeedback/problemFeedback.html"})}angular.module("app.problemFeedback").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){function t(t){var a=""+t;return e.getCommonData(a)}var a={getProblemList:t};return a}angular.module("app.problemFeedback").service("ProblemFeedbackService",e),e.$inject=["MyHttpService"]}(),function(){"use strict";function e(e,t,a,n,o){e.netSetList=[{placeholderValue:"服务器地址：",value:a.SERVER_PATH},{placeholderValue:"服务器端口：",value:a.SERVER_PORT}],e.IMEI=o.imei,e.setNet=function(){t.saveNetSettings(e.netSetList[0].value,e.netSetList[1].value,function(){n.goBack()})},e.backToLogin=function(){n.goBack()}}angular.module("app.setNet").controller("SetNetController",e),e.$inject=["$scope","SetNetService","SYS_INFO","$ionicHistory","$stateParams"]}(),function(){function e(e){e.state("setNet",{url:"/setNet",params:{imei:""},cache:!1,controller:"SetNetController",templateUrl:"templates/setNet/net.html"})}angular.module("app.setNet").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){function a(a,n,o){var i={SERVER_PATH:a,SERVER_PORT:n};e.serverInfo=i,t.SERVER_PATH=i.SERVER_PATH,t.SERVER_PORT=i.SERVER_PORT,o()}var n={saveNetSettings:a};return n}angular.module("app.setNet").service("SetNetService",e),e.$inject=["$localStorage","SYS_INFO"]}(),function(){"use strict";function e(e,t,a){function n(){var e=a.getWeather();e&&(o.weather=e)}var o=this;o.title="个人信息",o.group=e.userOrg,o.name=e.userName,o.weather={},n()}angular.module("app.setting").controller("SettingController",e),e.$inject=["$rootScope","$scope","GetWeatherService"]}(),function(){"use strict";function e(e){e.state("setting",{url:"/setting",templateUrl:"templates/setting/setting.html"})}angular.module("app.setting").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){var t={};return t}angular.module("app.setting").service("userInfoService",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,t,a,n){function o(){console.log(a.userId),t.getWaitForWorkInfo(a.userId,function(e){s.workList=e,console.log(s.workList)})}function i(e){"无"==e.sDate?n.go("problemFeedbackDetails",{problemItem:e,fromWhere:"waitForWork"}):n.go("planDetails",{planDetailsData:e,fromWhere:"waitForWork"})}var s=this;s.title="代办工作",s.titleController={},s.workList=[],s.toJobDetails=i,o()}angular.module("app.waitForWork").controller("WaitForWorkController",e),e.$inject=["$scope","WaitForWorkService","$rootScope","$state"]}(),function(){"use strict";function e(e){e.state("waitForWork",{url:"/waitForWork",templateUrl:"templates/waitForWork/waitForWork.html"})}angular.module("app.waitForWork").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,a,n,o,i,s,r,c,l){function u(t,a){var n="/hwweb/AssignmentAssessment/findDataByUserId?userId="+t;e.getCommonData(n,a)}var p={getWaitForWorkInfo:u};return p}angular.module("app.waitForWork").service("WaitForWorkService",e),e.$inject=["MyHttpService","$localStorage","$http","SYS_INFO","$timeout","$ionicLoading","$ionicPopup","$rootScope","$cordovaDevice","$state"]}(),function(){"use strict";function e(e){function t(){}var a=this;a.installationName="",t()}angular.module("app.accountDetails").controller("AccountDetailsController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e){e.state("accountDetails",{url:"/accountDetails",templateUrl:"templates/account/account.html"})}angular.module("app.accountDetails").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){var t={};return t}angular.module("app.accountDetails").service("AccountDetailsService",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,t,a,n,o){function i(){p.mapPositionObj.roadPositionArray=o.getPositionArray(p.line),console.log(p.mapPositionObj.roadPositionArray)}function s(){a.go("addAssessmentMap",{mapPositionObj:p.mapPositionObj})}function r(){var e={quality:50,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.CAMERA,allowEdit:!0,encodingType:Camera.EncodingType.JPEG,targetWidth:100,targetHeight:100,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!1,correctOrientation:!0};$cordovaCamera.getPicture(e).then(function(e){p.picBase64DataArray.push("data:image/jpeg;base64,"+e)},function(e){})}function c(){var e={type:p.uploadData.type,address:p.uploadData.address};o.queryAccount(e,function(e){p.accountAddressData=e.accountAddressData,p.mapPositionArray=e.mapPositionArray,p.spinnerShow=!0})}function l(e){p.spinnerShow=!1,p.uploadData.level=e.info.level,p.uploadData.road=e.info.road,p.uploadData.length=e.info.length,p.uploadData.width=e.info.width}function u(e){p.picBase64DataArray.splice(e,1)}var p=this;p.data={},p.title="录入计划",p.spinnerShow=!1,p.picBase64DataArray=[],p.uploadData={type:"",address:"",level:"",road:"",length:"",points:"",width:"",reason:"",remark:"",img:[]},p.line="120.352728,36.086514,120.352788,36.086477,120.352849,36.08644,120.35291,36.086403,120.35297,36.086365,120.353031,36.086328,120.353092,36.086291,120.353152,36.086254,120.353213,36.086217,120.353283,36.086178,120.353354,36.086138,120.353425,36.086099,120.353425,36.086099",p.assessmentStatusDetailsList={questionId:"1",address:"银川路",problem:"垃圾桶占路",cleaningLevel:"特级",roadLevel:"主干道",roadLength:"1600米",roadWidth:"30米",points:"-1.5",remarks:"备注",targetPosition:"129.134",picPath:["http://www.runoob.com/wp-content/uploads/2014/06/angular.jpg","http://www.chinagvs.com/ShopHome/Tpl/Public/images/left-logo.jpg","http://www.runoob.com/wp-content/uploads/2014/06/angular.jpg"]},p.accountList={type:["道路","公厕"],reason:["道路不净","垃圾桶占路"]},p.accountAddressData=[{name:"百度1",position:[],roadPositionArray:[],info:{level:"",road:"",length:"",width:""}},{name:"百度2",position:[],roadPositionArray:[],info:{level:"",road:"",length:"",width:""}},{name:"百度3",position:[],roadPositionArray:[],info:{level:"",road:"",length:"",width:""}},{address:"百度4",position:[],roadPositionArray:[],info:{level:"",road:"",length:"",width:""}}],p.mapPositionObj={address:"市南软件园2号楼",position:[120.41317,36.07705],roadPositionArray:[]},p.fun={toAddAssessmentMap:s,takePicture:r,spinnerHide:l,queryAccount:c,deletePic:u},i()}angular.module("app.addAssessment").controller("AddAssessmentController",e),e.$inject=["$rootScope","$scope","$state","$stateParams","AddAssessmentService"]}(),function(){"use strict";function e(e){e.state("addAssessment",{url:"/addAssessment",templateUrl:"templates/assessment/addAssessment/addAssessment.html"})}angular.module("app.addAssessment").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){function a(e,t,a,n){}function n(){document.addEventListener("deviceready",function(){var t={quality:50,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.CAMERA,allowEdit:!0,encodingType:Camera.EncodingType.JPEG,targetWidth:100,targetHeight:100,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!1,correctOrientation:!0};e.getPicture(t).then(function(e){var t=document.getElementById("myImage");t.src="data:image/jpeg;base64,"+e},function(e){})},!1)}function o(){document.addEventListener("deviceready",function(){var t={destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA};e.getPicture(t).then(function(e){var t=document.getElementById("myImage");t.src=e},function(e){}),e.cleanup().then()},!1)}function i(e,a){var n="";t.getCommonData(n,a)}function s(e){var a="";t.getCommonData(a,e)}function r(e){var t=[];console.log(e);for(var a=e.split(","),n=0;n<a.length-1;n+=2){var o=new Array;o[0]=a[n],o[1]=a[n+1],t.push(o)}return t}var c={addNewAssessment:a,getPhonePictureData:n,getPhonePicturePath:o,queryAccount:i,queryAccountList:s,getPositionArray:r};return c}angular.module("app.addAssessment").service("AddAssessmentService",e),e.$inject=["$cordovaCamera","MyHttpService"]}(),function(){"use strict";function e(e,t,a,n,o,i,s){function r(){console.log(p.data),p.data&&o.getAssessmentStatusList(p.data,function(e){p.assessmentStatusList=e})}function c(){null!=p.planDetailsData&&null==p.planDetailsData.status||s.alert({title:"该项目已考核",template:response.data}).then(function(e){})}function l(){null!=p.data&&null==p.data.status?a.go("assessmentStatusDetails",{assessmentStatusData:p.data,isChecked:!1}):s.alert({title:"该项目已考核",template:response.data}).then(function(e){})}function u(e){null!=p.data&&null==p.data.status&&(e.typeId=p.data.typeId,e.infraId=p.data.infraId,a.go("assessmentStatusDetails",{assessmentStatusData:e,isChecked:!0}))}var p=this;p.title="考核情况",p.data=n.planDetailsData,p.fun={toAssessmentStatusDetails:l,upload:c,checkStatusDetails:u},p.assessmentStatusList=[],r()}angular.module("app.assessmentStatus").controller("AssessmentStatusController",e),e.$inject=["$rootScope","$scope","$state","$stateParams","AssessmentStatusService","$ionicLoading","$ionicPopup"]}(),function(){"use strict";function e(e){e.state("assessmentStatus",{url:"/assessmentStatus",params:{planDetailsData:null},cache:!0,templateUrl:"templates/assessment/assessmentStatus/assessmentStatus.html"})}angular.module("app.assessmentStatus").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,a){function n(e,t){var n="/hwweb/AssignmentAssessment/findProView.action?planId="+e.planId+"&infrastructureId="+e.infraId+"&infoId="+e.id;a.getCommonData(n,t)}var o={getAssessmentStatusList:n};return o}angular.module("app.assessmentStatus").service("AssessmentStatusService",e),e.$inject=["$http","SYS_INFO","MyHttpService"]}(),function(){"use strict";function e(e,t,a,n,o,i,s){function r(){null!=p.data&&(console.log(p.data),o.getAssessmentStatusDetailsList(p.data,function(e){p.assessmentStatusDetailsList=e[0],p.assessmentStatusDetailsList&&(p.type=p.assessmentStatusDetailsList.type)})),c()}function c(){var e=new AMap.LngLat(116.397428,39.90923);t.mapObj=new AMap.Map("map",{view:new AMap.View2D({center:e,zoom:10,rotation:0}),lang:"zh_cn"}),console.log("走到这儿啦")}function l(){}function u(){}var p=this;p.data=n.assessmentStatusData,p.title="",p.type="05",p.isEdit=!1,p.isChecked=n.isChecked,p.titleController={backToBeforePage:l,enterMsg:u},p.initAmap=c,p.assessmentStatusDetailsList={},r()}angular.module("app.assessmentStatusDetails").controller("AssessmentStatusDetailsController",e),e.$inject=["$rootScope","$scope","$state","$stateParams","AssessmentStatusDetailsService","$ionicLoading","$ionicPopup"]}(),function(){"use strict";function e(e){e.state("assessmentStatusDetails",{url:"/assessmentStatusDetails",params:{assessmentStatusData:null,isChecked:!1},templateUrl:"templates/assessment/assessmentStatusDetails/assessmentStatusDetails.html"})}angular.module("app.assessmentStatusDetails").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,a){function n(e,t){var a="/hwweb/AssignmentAssessment/findFacilities.action?typeId="+e.typeId+"&infraId="+e.infraId;MyHttpService.getCommonData(a,t)}function o(){}function i(){document.addEventListener("deviceready",function(){var e={destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA};a.getPicture(e).then(function(e){var t=document.getElementById("myImage");t.src=e},function(e){}),a.cleanup().then()},!1)}var s={getAssessmentStatusDetailsList:n,getPhonePictureData:o,getPhonePicturePath:i};return s}angular.module("app.assessmentStatusDetails").service("AssessmentStatusDetailsService",e),e.$inject=["$http","SYS_INFO","$cordovaCamera"];
}(),function(){"use strict";function e(e,t,a,n,o){function i(){null==c.fromWhere&&(c.fromWhere="waitForWork"),c.data&&(c.title=c.data.planName),o.getPlanDetailsList(c.data.id,c.fromWhere,function(e){c.planDetailsList=e})}function s(){a.go("addAssessment")}function r(e){e.planId=c.data.id,a.go("assessmentStatus",{planDetailsData:e})}var c=this;c.data=n.planDetailsData,c.title="",c.fromWhere=n.fromWhere,c.fun={toAddAssessment:s},c.toAssessmentStatus=r,c.planDetailsList=[],i()}angular.module("app.planDetails").controller("PlanDetailsController",e),e.$inject=["$rootScope","$scope","$state","$stateParams","PlanDetailsService"]}(),function(){"use strict";function e(e){e.state("planDetails",{url:"/assessment/planDetails",params:{planDetailsData:null,formWhere:""},cache:!0,templateUrl:"templates/assessment/planDetails/planDetails.html"})}angular.module("app.planDetails").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,a){function n(e,t,n){var o="";switch(t){case"waitForWork":o="/hwweb/AssignmentAssessment/findPlanView.action?planId="+e,a.getCommonData(o,n);break;case"assessment":o="/hwweb/AssignmentAssessment/findPlanView.action?planId="+e,a.getCommonData(o,n)}}var o={getPlanDetailsList:n};return o}angular.module("app.planDetails").service("PlanDetailsService",e),e.$inject=["$http","SYS_INFO","MyHttpService"]}(),function(){"use strict";function e(e,t,a,n){function o(o,i){console.log(n.SERVER_PATH+":"+n.SERVER_PORT+o);var s=[];t.show({templateUrl:"templates/common/common.loadingData.html",duration:2e4}),e({method:"GET",url:n.SERVER_PATH+":"+n.SERVER_PORT+o}).then(function(e){1==e.data.success?(t.hide(),s=e.data.data,console.log("数据获取成功"),console.log(s),i(s)):(t.hide(),a.alert({title:e.data.msg}).then(function(e){console.log("数据获取失败"),console.log(s),i(s)}))},function(e){t.hide(),a.alert({title:"获取数据失败",template:e.data}).then(function(e){console.log("通信异常"),console.log(s),i(s)})})}var i={getCommonData:o};return i}angular.module("app.commonHttpService").service("MyHttpService",e),e.$inject=["$http","$ionicLoading","$ionicPopup","SYS_INFO"]}(),function(){"use strict";function e(e,t,a,n){function o(){switch(r.fromWhere){case"gridCheck":null==r.data||void 0==r.data?n.initMap():(r.map=n.initMap(),n.getCoordinateInfo(function(e){r.marker=n.initMyPosition(r.map,e),r.map.on("click",function(e){marker.setPosition(e.lnglat),r.postion=e.lnglat,console.log(e.lnglat)})}));break;case"addAssessment":}}function i(){n.getCoordinateInfo(function(e){r.marker.setPosition(e),r.map.setZoom(12),r.map.setCenter(e)})}function s(){$state.go("gridCheck",{position:r.postion})}var r=this;r.data={},r.title="地图详情",r.fun={},r.data=a.data,r.fromWhere=a.from,r.map,r.marker,r.postion=[],r.fun={refreshMyPosition:i,sendPosition:s},o()}angular.module("app.commonMap").controller("CommonMapController",e),e.$inject=["$rootScope","$scope","$stateParams","CommonMapService"]}(),function(){"use strict";function e(e){e.state("commonMap",{url:"/commonMap",params:{data:null,from:null},templateUrl:"templates/common/map/commonMap.html"})}angular.module("app.commonMap").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,a,n,o){function i(){t.show({template:'<div class="common-loading-dialog-center">  <ion-spinner icon="ios"></ion-spinner>&nbsp;&nbsp;  <span>地图数据加载中...</span></div>',duration:5e3});var e=new AMap.Map("map",{resizeEnable:!0,zoom:12,lang:"zh_cn"});return e.plugin(["AMap.ToolBar"],function(){var t=new AMap.ToolBar;e.addControl(t)}),t.hide(),e}function s(e){t.show({template:'<div class="common-loading-dialog-center">  <ion-spinner icon="ios"></ion-spinner>&nbsp;&nbsp;  <span>地图数据加载中...</span></div>',duration:5e3});new AMap.Map("map");map.setZoom(10),map.setCenter([116.39,39.9]),t.hide()}function r(e,a){t.show({template:'<div class="common-loading-dialog-center">  <ion-spinner icon="ios"></ion-spinner>&nbsp;&nbsp;  <span>地图数据加载中...</span></div>',duration:2e4});var a=new AMap.LngLat(116.397428,39.90923);new AMap.Map("map",{view:new AMap.View2D({center:a,zoom:10,rotation:0}),lang:"zh_cn"});t.hide()}function c(e,t){e.setCenter(t);var a=new AMap.Marker({position:t});return a.setMap(e),a.setTitle("我的位置"),a}function l(e){t.show({template:'<div class="common-loading-dialog-center">  <ion-spinner icon="ios"></ion-spinner>&nbsp;&nbsp;  <span>定位中...</span></div>',duration:1e4});var a=new Array;o.getCurrentPosition({timeout:1e4,enableHighAccuracy:!1}).then(function(n){a[0]=n.coords.longitude,a[1]=n.coords.latitude,e(a),t.hide(),console.log("定位成功，坐标数组："+a)},function(n){a[0]=120.41317,a[1]=36.07705,e(a),t.hide(),console.log("获取坐标失败：code:"+n.code+"***msg:"+n.msg)})}function u(e){var t={};return AMap.plugin("AMap.Geocoder",function(){var a=new AMap.Geocoder({city:"010"});a.getAddress(e,function(e,a){if("complete"==e)return t.district=a.regeocode.addressComponent.city+a.regeocode.addressComponent.district,t.street=a.regeocode.addressComponent.street,console.log(a),t})}),t}function p(e){t.show({template:'<div class="common-loading-dialog-center">  <ion-spinner icon="ios"></ion-spinner>&nbsp;&nbsp;  <span>定位中...</span></div>',duration:1e4});var a=[];o.getCurrentPosition({timeout:1e4,enableHighAccuracy:!1}).then(function(n){a[0]=n.coords.longitude,a[1]=n.coords.latitude,t.hide(),console.log("定位成功，坐标数组："+a),AMap.plugin("AMap.Geocoder",function(){var t=new AMap.Geocoder({city:"010"});t.getAddress(a,function(t,a){if("complete"==t){var n={};n.district=a.regeocode.addressComponent.city+a.regeocode.addressComponent.district,n.street=a.regeocode.addressComponent.street,e(n),console.log(a)}else console.log("获取地理位置信息失败！"+t+a)})})},function(a){var n=[120.41317,36.07705];t.hide(),console.log("获取坐标失败：code:"+a.code+"***msg:"+a.msg),AMap.plugin("AMap.Geocoder",function(){var t=new AMap.Geocoder({city:"010"});t.getAddress(n,function(t,a){if("complete"==t){var n={};n.district=a.regeocode.addressComponent.city+a.regeocode.addressComponent.district,n.street=a.regeocode.addressComponent.street,e(n),console.log(a)}else console.log("获取地理位置信息失败！"+t+a)})})})}var d={initMap:i,initRoadMap:s,initInstallationMap:r,initMyPosition:c,getCoordinateInfo:l,getAddressByLatitudeAndLongitude:u,getAddressByGPS:p};return d}angular.module("app.commonMap").service("CommonMapService",e),e.$inject=["$http","$ionicLoading","$ionicPopup","SYS_INFO","$cordovaGeolocation"]}(),function(){"use strict";function e(e,t,a,n,o,i,s,r,c){function l(){d.savedData=c.getSavedUploadedData()}function u(e){}function p(e){}var d=this;d.title="本地内容",d.savedData={data:[{time:"2017/8/10/pm8:00",address:"山东路",points:"-1",reason:"道路不净",remark:"这是备注",img:[]},{time:"2017/8/10/pm6:00",address:"银川路",points:"-2",reason:"垃圾桶占路",remark:"这是备注",img:[]},{time:"2017/8/10/pm9:00",address:"镇江路",points:"-1",reason:"道路不净",remark:"这是备注",img:[]},{time:"2017/8/10/pm10:00",address:"江西路",points:"-2",reason:"垃圾桶占路",remark:"这是备注",img:[]}]},d.fun={uploadData:u,deleteSavedData:p},l()}angular.module("app.savedData").controller("SavedDataController",e),e.$inject=["$scope","$state","$filter","Session","homeService","SYS_INFO","GetWeather","$stateParams","SavedDataService"]}(),function(){"use strict";function e(e){e.state("savedData",{url:"/savedData",cache:!0,params:{savedData:null},templateUrl:"templates/home/savedData/savedData.html"})}angular.module("app.savedData").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,a,n,o,i){function s(){if(i.savedData)return i.savedData}function r(e){}function c(){}var l={getSavedUploadedData:s,uploadData:r,deleteSavedData:c};return l}angular.module("app.savedData").service("SavedDataService",e),e.$inject=["$http","SYS_INFO","Session","$interval","$localStorage","$stateParams"]}(),function(){"use strict";function e(e){function t(){}var a=this;a.title="消息详情",t()}angular.module("app.messageContent").controller("MessageContentController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e){e.state("messageContent",{url:"/messageContent",templateUrl:"templates/message/messageContent/messageContent.html"})}angular.module("app.messageContent").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){var t={};return t}angular.module("app.messageContent").service("MessageContentService",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,t,a){function n(){null==s.problemDetails&&(s.problemDetails={},s.problemDetails.postion=[120.41317,36.07705],s.problemDetails.address="燕儿岛路"),a.getProblemFeedbackDetailsMap(s.problemDetails)}function o(){var e={quality:50,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.CAMERA,allowEdit:!0,encodingType:Camera.EncodingType.JPEG,targetWidth:100,targetHeight:100,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!1,correctOrientation:!0};$cordovaCamera.getPicture(e).then(function(e){var t=document.getElementById("myImage");t.problemFeedbackDetailsImg="data:image/jpeg;base64,"+e},function(e){})}function i(){a.uploadProblemFeedbackData(s.problemFeedbackData,s.fromWhere)}var s=this;s.title="问题详情",s.fromWhere=t.fromWhere,s.problemDetails=t.problemItem,s.feedBack="",s.footerContent="确定",s.fun={initCamera:o,uploadProblemFeedbackData:i},s.problemFeedbackData={},n()}angular.module("app.problemFeedbackDetails").controller("ProblemFeedbackDetailsController",e),e.$inject=["$scope","$stateParams","ProblemFeedbackDetailsService"]}(),function(){"use strict";function e(e){e.state("problemFeedbackDetails",{url:"/problemFeedbackDetails",params:{problemItem:null,fromWhere:""},templateUrl:"templates/problemFeedback/problemFeedbackDetails/problemFeedbackDetails.html"})}angular.module("app.problemFeedbackDetails").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,a){function n(e){var t=new AMap.Map("problemFeedbackDetailsMap",{resizeEnable:!0,zoom:18,center:e.position});new AMap.Marker({position:e.position,title:e.address,map:t});t.plugin(["AMap.ToolBar"],function(){var e=new AMap.ToolBar;t.addControl(e)})}function o(e,a){switch(t.show({template:'<div class="common-loading-dialog-center">  <ion-spinner icon="ios"></ion-spinner>&nbsp;&nbsp;  <span>数据上传中...</span></div>',duration:1e4}),a){case"problemFeedbackDetails":break;case"waitForWork":}}var i={getProblemFeedbackDetailsMap:n,uploadProblemFeedbackData:o};return i}angular.module("app.problemFeedbackDetails").service("ProblemFeedbackDetailsService",e),e.$inject=["$http","$ionicLoading","$ionicPopup"]}(),function(){"use strict";function e(e,t,a,n,o,i){function s(){null!=n.mapPositionObj&&(u.mapPositionObj=n.mapPositionObj,console.log(u.mapPositionObj)),r()}function r(){u.map=o.initMap(u.mapPositionObj.position),u.markerPerson=new AMap.Marker,u.mapPositionObj.roadPositionArray.length<=0?(u.marker=new AMap.Marker({position:u.mapPositionObj.position,icon:new AMap.Icon({size:new AMap.Size(32,32),image:"/www/assets/global/img/position.png",imageOffset:new AMap.Pixel(0,0)})}),u.marker.setMap(u.map),u.map.setCenter(u.mapPositionObj.position)):(u.polyline=new AMap.Polyline({path:u.mapPositionObj.roadPositionArray,strokeColor:"#1C8B08",strokeWeight:5}),u.polyline.setMap(u.map),u.map.setZoom(17),u.centerPositionNum=parseInt(u.mapPositionObj.roadPositionArray.length/2),u.map.setCenter(u.mapPositionObj.roadPositionArray[centerPositionNum]))}function c(){o.getCoordinateInfo(function(e){u.markerPerson.setPosition(e),u.map.setZoom(13),u.markerPerson.setMap(u.map),u.map.setCenter(e)})}function l(){u.mapPositionObj.roadPositionArray.length<=0?u.map.setCenter(u.mapPositionObj.position):u.map.setCenter(u.mapPositionObj.roadPositionArray[centerPositionNum])}var u=this;u.data={},u.title="地图详情",u.accountList={type:["全部","公厕","街道","车辆","收集站","垃圾桶"],reason:["道路不净","垃圾桶占路"]},u.accountAddressData=[{name:"百度1",position:[],roadPositionArray:[],info:{level:"",road:"",length:"",width:""}},{name:"百度2",position:[],roadPositionArray:[],info:{level:"",road:"",length:"",width:""}},{name:"百度3",position:[],roadPositionArray:[],info:{level:"",road:"",length:"",width:""}},{address:"百度4",position:[],roadPositionArray:[],info:{level:"",road:"",length:"",width:""}}],u.map,u.marker,u.markerPerson,u.polyline,u.centerPositionNum=0,u.fun={refreshMyPosition:c,refreshRoadOrInstallationPosition:l},u.mapPositionObj={address:"市南软件园2号楼",position:[120.41317,36.07705],roadPositionArray:[]},s()}angular.module("app.addAssessment").controller("AddAssessmentMapController",e),e.$inject=["$rootScope","$scope","$state","$stateParams","CommonMapService","AddAssessmentMapService"]}(),function(){"use strict";function e(e){e.state("addAssessmentMap",{url:"/addAssessmentMap",params:{mapPositionObj:null},templateUrl:"templates/assessment/addAssessment/addAssessmentMap/addAssessmentMap.html"})}angular.module("app.addAssessmentMap").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,a,n){function o(){}var i={initAddAssessmentMap:o};return i}angular.module("app.addAssessmentMap").service("AddAssessmentMapService",e),e.$inject=["$http","SYS_INFO","$cordovaCamera","CommonMapService"]}();