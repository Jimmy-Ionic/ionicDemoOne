!function(){"use strict";function e(e,t,a,o,n,i,s,r){function c(){console.log("done"),console.log(a.unReadMsgCount)}function l(){console.log("循环获取获取消息error")}function u(){}function p(){i.goBack()}function d(){s.go("recMessage")}a.unReadMsgCount=0,a.goBack=p,a.toMessagePage=d;var m=t.SERVER_PATH+":"+t.SERVER_PORT+"/hwweb/AppMessage/findMsgByUserId.action?userId=123";r.setServerInfo();var g=o(function(){n.get(m).then(function(e){1==e.data.success&&(a.unReadMsgCount=e.data.data.count)},function(e){})},3e5);g.then(c,l,u)}function t(e,t,a,o,n){a.ready(function(){if(window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault(),window.codePush){var t;e.downloadMsg="";var a=function(e){t.close(),n.alert({title:"更新提示",template:"更新失败！"})},o=function(){t.close(),n.alert({title:"更新提示",template:"更新成功！"}).then(function(){codePush.restartApplication()})},i=function(e){return(e/1024).toFixed(2)},s=function(t){e.downloadMsg=i(t.receivedBytes)+"kb 共"+i(t.totalBytes)+"kb"},r=function(e){e.install(o,a,{installMode:InstallMode.ON_NEXT_RESUME,minimumBackgroundDuration:120,mandatoryInstallMode:InstallMode.ON_NEXT_RESTART})},c=function(o){o&&!o.failedInstall&&n.confirm({title:"更新提示",template:"有可用的新版本，是否需要更新？",cancelText:"否",okText:"是"}).then(function(i){i&&(t=n.show({template:"<span>正在下载 {{downloadMsg}}</span>",scope:e,title:"更新提示"}),o.download(r,a,s))})};window.codePush.checkForUpdate(c,a)}}),a.registerBackButtonAction(function(e){e.preventDefault();var a=t.path();return"/homePageNew"===a||"/login"===a?ionic.Platform.exitApp():o.backView?o.goBack():ionic.Platform.exitApp(),!1},101)}function a(e,t,a){a.platform.ios.tabs.style("standard"),a.platform.ios.tabs.position("bottom"),a.platform.android.tabs.style("standard"),a.platform.android.tabs.position("standard"),a.platform.ios.navBar.alignTitle("center"),a.platform.android.navBar.alignTitle("left"),a.platform.ios.backButton.previousTitleText("").icon("ion-ios-arrow-thin-left"),a.platform.android.backButton.previousTitleText("").icon("ion-android-arrow-back"),a.platform.ios.views.transition("ios"),a.platform.android.views.transition("android"),t.otherwise("/login")}a.$inject=["$stateProvider","$urlRouterProvider","$ionicConfigProvider"],e.$inject=["$scope","SYS_INFO","$rootScope","$interval","$http","$ionicHistory","$state","LoginService"],angular.module("app",["ionic","ngStorage","ngFileUpload","ng-echarts","ngCordova","app.login","app.home","app.savedData","app.waitForWork","app.assessment","app.planDetails","app.assessmentStatus","app.assessmentStatusDetails","app.addAssessment","app.addAssessmentMap","app.gridCheck","app.gridCheckMap","app.problemFeedback","app.problemFeedbackDetails","app.account","app.accountDetails","app.history","app.map","app.appReceivedMessage","app.messageContent","app.setting","app.setNet","app.commonHttpService","app.commonMap"]).run(t).config(a).constant("SYS_INFO",{SERVER_PATH:"http://172.72.100.61",SERVER_PORT:"8090",VERSION:"1.0.0",DIGITS:2}).controller("AppController",e),e.$inject.LoginService,t.$inject=["$rootScope","$location","$ionicPlatform","$ionicHistory","$ionicPopup"]}(),function(){"use strict";angular.module("app.account",[])}(),function(){"use strict";angular.module("app.assessment",[])}(),function(){"use strict";angular.module("app.gridCheck",[])}(),function(){"use strict";angular.module("app.history",[])}(),function(){"use strict";angular.module("app.home",[])}(),function(){"use strict";angular.module("app.login",[])}(),function(){"use strict";angular.module("app.map",[])}(),function(){"use strict";angular.module("app.appReceivedMessage",[])}(),function(){"use strict";angular.module("app.problemFeedback",[])}(),function(){"use strict";angular.module("app.setNet",[])}(),function(){"use strict";angular.module("app.setting",[])}(),function(){"use strict";angular.module("app.waitForWork",[])}(),function(){"use strict";angular.module("app.accountDetails",[])}(),function(){"use strict";angular.module("app.addAssessment",[])}(),function(){"use strict";angular.module("app.assessmentStatus",[])}(),function(){"use strict";angular.module("app.assessmentStatusDetails",[])}(),function(){"use strict";angular.module("app.planDetails",[])}(),function(){"use strict";angular.module("app.commonHttpService",[])}(),function(){"use strict";angular.module("app.commonMap",[])}(),function(){"use strict";angular.module("app.gridCheckMap",[])}(),function(){"use strict";angular.module("app.savedData",[])}(),function(){"use strict";angular.module("app.messageContent",[])}(),function(){"use strict";angular.module("app.problemFeedbackDetails",[])}(),function(){"use strict";angular.module("app.addAssessmentMap",[])}(),function(){"use strict";function e(e,t,a){function o(){n()}function n(){t.getQueryCriteriaList(function(e){c.queryCriteriaObj=e[0]})}function i(){c.accountType&&""!=c.accountType&&(c.queryCriteria.accountType=JSON.parse(c.accountType).code),t.getAccountListByQueryCriteria(c.queryCriteria,function(e){c.accountList=e[0]})}function s(e){e&&(c.levelList=JSON.parse(e).subclass)}function r(e,t){a.go("accountDetails",{accountData:e,code:t})}var c=this;c.title="环卫台帐",c.queryCriteriaObj={},c.accountType,c.levelList=[],c.queryCriteria={cityPlace:"",accountType:"",level:"",keyword:""},c.accountList=[],c.fun={updateLevelArrayByType:s,getAccountListByQueryCriteria:i,toAccountDetails:r},o()}angular.module("app.account").controller("AccountController",e),e.$inject=["$scope","AccountService","$state"]}(),function(){"use strict";function e(e){e.state("account",{url:"/account",templateUrl:"templates/account/account.html"})}angular.module("app.account").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){function a(e){var a="";t.getCommonData(a,e)}function o(e,a){var o="/hwweb/Ledger/findFacilitiesByCondition.action?areaId="+e.cityPlace+"&code="+e.accountType+"&subclassId="+e.level+"&name="+e.keyword;t.getCommonData(o,a)}function n(e){var a="/hwweb/Ledger/findAllAreaAndItem.action";t.getCommonData(a,e)}var i={getAccountList:a,getAccountListByQueryCriteria:o,getQueryCriteriaList:n};return i}angular.module("app.account").service("AccountService",e),e.$inject=["$http","MyHttpService"]}(),function(){"use strict";function e(e,t,a,o){function n(){o.getPlanList(e.userId,function(e){s.planList=e})}function i(e){a.go("planDetails",{planDetailsData:e,fromWhere:"assessment"})}var s=this;s.title="综合考核",s.titleController={},s.toPlanDetails=i,s.planList=[],n()}angular.module("app.assessment").controller("AssessmentController",e),e.$inject=["$rootScope","$scope","$state","AssessmentService"]}(),function(){"use strict";function e(e){e.state("assessment",{url:"/assessment",templateUrl:"templates/assessment/assessment.html"})}angular.module("app.assessment").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,a){function o(e,t){var o="/hwweb/Comprehensive/findDataByUserId.action?userId="+e;a.getCommonData(o,t)}var n={getPlanList:o};return n}angular.module("app.assessment").service("AssessmentService",e),e.$inject=["$http","SYS_INFO","MyHttpService"]}(),function(){"use strict";function e(e,t,a,o,n,i,s){function r(){n.getGridCheckQuestionCodeArray(function(e){d.questionCode=e,d.questionCodeObj=d.questionCode[0],console.log(d.questionCode)})}function c(){o.go("gridCheckMap")}function l(){var e={quality:100,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.CAMERA,allowEdit:!0,encodingType:Camera.EncodingType.JPEG,targetWidth:200,targetHeight:200,popoverOptions:Camera.PopoverOptions,saveToPhotoAlbum:!0,correctOrientation:!0};$cordovaCamera.getPicture(e).then(function(e){var t=document.getElementById("gridCheckImg");t.src="data:image/jpeg;base64,"+e,d.imgName=moment().format("YYYY-MM-DD HH:mm:ss")+".jpeg",d.uploadData.img=e},function(e){s.alert({title:"照片获取失败，请重新拍照!"})})}function u(){i.getAddressByGPS(function(e){d.uploadData.areaName=e.district,d.uploadData.streetName=e.street})}function p(){if(d.uploadData.examiner=e.userName,t.get("cacheGridCheckMapData")&&(d.uploadData.point=t.get("cacheGridCheckMapData").get("position"),d.uploadData.address=t.get("cacheGridCheckMapData").get("address")),d.uploadData.questionCode=d.questionCodeObj.id,d.uploadData.problemName=d.questionCodeObj.name,console.log("网格化巡检需要上传的数据："),console.log(d.uploadData),""==d.uploadData.areaName)s.alert({title:"市区不能为空！"}).then();else if(""==d.uploadData.streetName)s.alert({title:"街道不能为空！"}).then();else if(""==d.uploadData.problemCode||null==d.uploadData.problemCode)s.alert({title:"问题代码不能为空！"});else if(""==d.uploadData.problemName||null==d.uploadData.problemName)s.alert({title:"问题代码不能为空！"});else if(""==d.uploadData.point||""==d.uploadData.address)s.alert({title:"详细检查地点不能为空"}).then();else{var a=JSON.stringify(d.uploadData);n.uploadGridCheckData(a,function(e){})}}var d=this;d.title="网格化巡检",d.questionCode=[],d.questionCodeObj={},d.imgName="",d.uploadData={examiner:"",areaName:"",streetName:"",problemCode:"",problemName:"",description:"",location:"",point:[],img:""},d.fun={toGridCheckMap:c,takeGridCheckPicture:l,getGridCheckLocation:u,uploadGridCheckData:p},r()}angular.module("app.gridCheck").controller("GridCheckController",e),e.$inject=["$rootScope","$cacheFactory","$scope","$state","GridCheckService","CommonMapService","$ionicPopup"]}(),function(){"use strict";function e(e){e.state("gridCheck",{url:"/gridCheck",cache:!1,templateUrl:"templates/gridCheck/gridCheck.html"})}angular.module("app.gridCheck").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){function t(t){var a='/hwweb/AssignmentAssessment/findDItem.action?typeId=""';e.getCommonData(a,t)}function a(t,a){var o="/hwweb/GridInspection/saveRegionPro.action";e.uploadCommonData(o,t,a)}var o={getGridCheckQuestionCodeArray:t,uploadGridCheckData:a};return o}angular.module("app.gridCheck").service("GridCheckService",e),e.$inject=["MyHttpService"]}(),function(){"use strict";function e(e,t,a){function o(){for(var e=0;e<15;e++)s.historyList[e]={id:"1",workName:"6月份考核计划",year:"2017年",month:"六月"};for(var e=0;e<12;e++)s.monthArray[e]=e+1;console.log(s.monthArray);for(var e=0;e<5;e++)s.yeahArray[e]=s.thisYeah-e;a.getHistoryData($rootScope.userId,function(e){})}function n(e){t.go("planDetails",{assessmentData:e,fromWhere:"history"})}function i(){a.getHistoryDataByCondition(s.queryCriteria,function(e){})}var s=this;s.title="历史考核记录",s.fun={toPlanDetails:n,getHistoryDataByCondition:i},s.toPlanDetails=n,s.historyList=[],s.yeahArray=[],s.monthArray=[],s.thisYeah=moment().format("YYYY"),s.thisMonth=moment().format("M"),s.queryCriteria={keyword:"",selectedYeah:"",selectedMonth:""},o()}angular.module("app.history").controller("HistoryController",e),e.$inject=["$scope","$state","HistoryService"]}(),function(){"use strict";function e(e){e.state("history",{url:"/history",templateUrl:"templates/history/history.html"})}angular.module("app.history").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){function t(t,a){var o="";e.getCommonData(o,a)}function a(t,a){var o="/hwweb/Comprehensive/viewHistory.action?name="+t.keyword+"&year="+t.selectedYeah+"&month="+t.selectedMonth;e.getCommonData(o,a)}var o={getHistoryData:t,getHistoryDataByCondition:a};return o}angular.module("app.history").service("HistoryService",e),e.$inject=["MyHttpService"]}(),function(){"use strict";function e(e,t,a,o,n,i,s,r,c,l,u){function p(){r.getWeather(function(e){b.weather=e}),b.savedData=i.getSavedUploadedData(),b.savedData&&(b.hasSavedData=!0,b.saveDataNum=b.savedData.length)}function d(){o.go("waitForWork")}function m(){o.go("assessment")}function g(){o.go("gridCheck")}function f(){o.go("problemFeedback")}function A(){o.go("account")}function h(){o.go("history")}function v(){o.go("map")}function D(){o.go("recMessage")}function P(){o.go("setting")}function S(){o.go("savedData",{savedData:b.savedData})}var b=this;b.title="请选择工作",b.hasSavedData=!0,b.saveDataNum="20",b.savedData={},b.isCommonAccount=e.isCommonAccount,b.weather={},b.msgCount=e.unReadMsgCount,b.homeWorkController={toWaitForWork:d,toComprehensiveAssessment:m,toGridCheck:g,toProblemFeedback:f,toAccount:A,toHistory:h,toMap:v,toMessage:D,toSettings:P,toSavedData:S},p()}angular.module("app.home").controller("HomeController",e),e.$inject=["$rootScope","$localStorage","$scope","$state","$filter","HomeService","SYS_INFO","GetWeatherService","$stateParams","$interval","$cordovaCamera"]}(),function(){"use strict";function e(e){e.state("home",{url:"/home",cache:!0,templateUrl:"templates/home/home.html"})}angular.module("app.home").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,a,o,n){function i(){return e.savedData?e.savedData:null}var s={getSavedUploadedData:i};return s}function t(e,t){function a(t){e.get(n).then(function(e){e.data?(i.weatherDate=moment().format("MM月DD日"),i.address="青岛",i.temperature=o(e.data),i.weather=e.data.data.forecast[0].type,t(i)):(i.weatherDate=moment().format("MM月DD日"),i.address="青岛",i.temperature="20度",i.weather="晴",t(i))},function(e){i.weatherDate=moment().format("MM月DD日"),i.address="青岛",i.temperature="20度",i.weather="晴",t(i)}),console.log(i)}function o(e){if(e.data){var t=e.data.forecast[0].low.substring(3,5),a=e.data.forecast[0].high.substring(3,5),o=t+"~"+a+"度";return o}return""}var n=t.SERVER_PATH+":"+t.SERVER_PORT+"/hwweb/Weather/WeatherJson.action",i={},s={getWeather:a};return s}angular.module("app.home").service("GetWeatherService",t).factory("HomeService",e),e.$inject=["$localStorage","$http","SYS_INFO","$interval","$rootScope"],t.$inject=["$http","SYS_INFO","$interval"]}(),function(){"use strict";function e(e,t,a,o,n){function i(){}function s(){t.go("setNet",{imei:e.imei})}function r(){a.login(e.info.userName,e.info.password,e.imei,e.isCommonAccount,e.info.isRemAccountAndPwd,e.info)}e.doLogin=r,e.setNetAddress=s,e.isCommonAccount=!1,e.userInfo=a.getUserInfo(),e.imei="123456",e.info={userName:e.userInfo.userName,password:e.userInfo.password,isRemAccountAndPwd:e.userInfo.isRemAccountAndPwd},i()}var t=angular.module("app.login");t.controller("LoginController",e),e.$inject=["$scope","$state","LoginService","$cordovaDevice","$ionicPopup"]}(),function(){function e(e){e.state("login",{url:"/login",templateUrl:"templates/login/login.html"})}angular.module("app.login").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,a,o,n,i,s,r,c){function l(e,i,r,c,l,d){n.show({template:"正在登录..."}),o(function(){n.hide()},3e4),i=hex_md5(i);var m="/hwweb/AppUser/userLogin.action?";switch(c){case!1:t.get(a.SERVER_PATH+":"+a.SERVER_PORT+m+"account="+e+"&password="+i+"&imei="+r).then(function(e){s.isCommonAccount=!1,u(e,l,d)},function(e){p(e)});break;case!0:t.get(a.SERVER_PATH+":"+a.SERVER_PORT+m+"account="+e+"&password="+i).then(function(e){s.isCommonAccount=!0,u(e,l,d)},function(e){p(e)})}}function u(e,t,a){console.log(e),"1"==e.data.success?o(function(){t?m(a):A(),d(e.data.data[0])},100).then(function(){n.hide(),c.go("home")}):(n.hide(),i.alert({title:e.data.msg}).then(function(e){}))}function p(e){n.hide(),i.alert({title:"登陆失败",template:e.data}).then(function(e){})}function d(e){e?(s.userId=e.id,s.userName=e.name,s.userOrg=e.org):(s.userId="",s.userName="",s.userOrg="")}function m(t){var a={userName:"",password:"",isRemAccountAndPwd:!1};t&&(a.userName=t.userName,a.password=t.password,a.isRemAccountAndPwd=t.isRemAccountAndPwd),e.userInfo=a}function g(){function e(){return r.getUUID()}document.addEventListener("deviceready",e,!1)}function f(){var t={userName:"",password:"",isRemAccountAndPwd:!1};return e.userInfo&&(t.userName=e.userInfo.userName,t.password=e.userInfo.password,t.isRemAccountAndPwd=e.userInfo.isRemAccountAndPwd),t}function A(){delete e.userInfo}function h(){var t={SERVER_PATH:"",SERVER_PORT:""};e.serverInfo?(a.SERVER_PATH=e.serverInfo.SERVER_PATH,a.SERVER_PORT=e.serverInfo.SERVER_PORT):(t.SERVER_PATH=a.SERVER_PATH,t.SERVER_PORT=a.SERVER_PORT,e.serverInfo=t)}var v={login:l,getUserInfo:f,setServerInfo:h,getImei:g};return v}angular.module("app.login").service("LoginService",e),e.$inject=["$localStorage","$http","SYS_INFO","$timeout","$ionicLoading","$ionicPopup","$rootScope","$cordovaDevice","$state"]}(),function(){"use strict";function e(e,t,a,o){function n(){s(),t.getAccountList(c.queryCriteria,function(e){if(c.mapPositionObj=e[0],c.mapPositionObj){if(c.mapPositionObj.gongche)for(var t in c.mapPositionObj.gongche){var a=o.getPositionArray(c.mapPositionObj.gongche[t].point),n={name:"",info:""};a.length>0&&(a=a[0]),c.markers.push(new AMap.Marker({position:a,extData:n,content:'<div style="background-color: hsla(180, 100%, 50%, 0.7); height: 24px; width: 24px; border: 1px solid hsl(180, 100%, 40%); border-radius: 12px; box-shadow: hsl(180, 100%, 50%) 0px 0px 1px;"></div>',offset:new AMap.Pixel((-15),(-15))}).on("click",i))}if(c.mapPositionObj.daolu)for(var t in c.mapPositionObj.daolu){var a=o.getPositionArray(c.mapPositionObj.daolu[t].point);c.polyline=new AMap.Polyline({path:a,strokeColor:"#1C8B08",strokeWeight:5}),c.polyline.setMap(c.map)}if(c.mapPositionObj.cheliang)for(var t in c.mapPositionObj.cheliang){var a=o.getPositionArray(c.mapPositionObj.cheliang[t].point),n={name:"",info:""};a.length>0&&(a=a[0]),console.log(a),c.markers.push(new AMap.Marker({position:a,extData:n,content:'<div style="background-color: hsla(180, 100%, 50%, 0.7); height: 24px; width: 24px; border: 1px solid hsl(180, 100%, 40%); border-radius: 12px; box-shadow: hsl(180, 100%, 50%) 0px 0px 1px;"></div>',offset:new AMap.Pixel((-15),(-15))}).on("click",i))}if(c.mapPositionObj.lajitong)for(var t in c.mapPositionObj.lajitong){var a=o.getPositionArray(c.mapPositionObj.lajitong[t].point),n={name:"",info:""};a.length>0&&(a=a[0]),c.markers.push(new AMap.Marker({position:a,extData:n,content:'<div style="background-color: hsla(180, 100%, 50%, 0.7); height: 24px; width: 24px; border: 1px solid hsl(180, 100%, 40%); border-radius: 12px; box-shadow: hsl(180, 100%, 50%) 0px 0px 1px;"></div>',offset:new AMap.Pixel((-15),(-15))}).on("click",i))}if(c.mapPositionObj.shoujizhan)for(var t in c.mapPositionObj.shoujizhan){var a=o.getPositionArray(c.mapPositionObj.shoujizhan[t].point),n={name:"",info:""};a.length>0&&(a=a[0],console.log("收集站"),console.log(a)),c.markers.push(new AMap.Marker({position:a,extData:n,content:'<div style="background-color: hsla(180, 100%, 50%, 0.7); height: 24px; width: 24px; border: 1px solid hsl(180, 100%, 40%); border-radius: 12px; box-shadow: hsl(180, 100%, 50%) 0px 0px 1px;"></div>',offset:new AMap.Pixel((-15),(-15))}).on("click",i))}if(c.mapPositionObj.guojietianqiao)for(var t in c.mapPositionObj.guojietianqiao){var n={name:c.mapPositionObj.guojietianqiao[t].RCPsname,info:c.mapPositionObj.guojietianqiao[t].site},a=o.getPositionArray(c.mapPositionObj.guojietianqiao[t].point);a.length>0&&(a=a[0],console.log("过街天桥"),console.log(a)),c.markers.push(new AMap.Marker({position:a,extData:n,content:'<div style="background-color: hsla(180, 100%, 50%, 0.7); height: 24px; width: 24px; border: 1px solid hsl(180, 100%, 40%); border-radius: 12px; box-shadow: hsl(180, 100%, 50%) 0px 0px 1px;"></div>',offset:new AMap.Pixel((-15),(-15))}).on("click",i))}}r(0)})}function i(e){var t=[];t.push("<div>"+e.target.getExtData().name),t.push(e.target.getExtData().info+"</div>");var a=new AMap.InfoWindow({content:t.join("<br/>")});a.open(c.map,e.target.getPosition()),console.log("已经执行了点击！！！")}function s(){c.map=e.initMap(),c.map.setZoom(17),c.markerPerson=new AMap.Marker,e.getCoordinateInfo(function(e){c.map.setCenter(e),c.markerPerson.setPosition(e),c.map.setZoom(17),c.markerPerson.setMap(c.map),c.circle=new AMap.Circle({center:e,radius:50,strokeColor:"#F85C5C",strokeOpacity:1,strokeWeight:0,fillColor:"#F85C5C",fillOpacity:.35}),c.circle.setMap(c.map)})}function r(e){if(c.cluster&&c.cluster.setMap(null),1==e){var t=[{url:"http://a.amap.com/jsapi_demos/static/images/blue.png",size:new AMap.Size(32,32),offset:new AMap.Pixel((-16),(-16))},{url:"http://a.amap.com/jsapi_demos/static/images/green.png",size:new AMap.Size(32,32),offset:new AMap.Pixel((-16),(-16))},{url:"http://a.amap.com/jsapi_demos/static/images/orange.png",size:new AMap.Size(36,36),offset:new AMap.Pixel((-18),(-18))},{url:"http://a.amap.com/jsapi_demos/static/images/red.png",size:new AMap.Size(48,48),offset:new AMap.Pixel((-24),(-24))},{url:"http://a.amap.com/jsapi_demos/static/images/darkRed.png",size:new AMap.Size(48,48),offset:new AMap.Pixel((-24),(-24))}];c.cluster=new AMap.MarkerClusterer(c.map,c.markers,{styles:t,gridSize:80})}else c.cluster=new AMap.MarkerClusterer(c.map,c.markers,{gridSize:80}),console.log("点聚合已经走完哈哈")}var c=this;c.data={},c.title="地图查询",c.spinnerShow=!1,c.queryObj={account:[],keyword:""},c.queryCriteria={type:"",keyword:""},c.allCheck={account:"全部",selected:!0,code:""},c.accountList=[{id:"0",account:"公厕",selected:!1,code:"gongche"},{id:"1",account:"道路",selected:!1,code:"jiedao"},{id:"2",account:"车辆",selected:!1,code:"cheliang"},{id:"3",account:"垃圾桶",selected:!1,code:"lajitong"},{id:"4",account:"收集站",selected:!1,code:"shoujizhan"},{id:"5",account:"过街天桥",selected:!1,code:"guojietianqiao"}],c.map,c.marker,c.cluster,c.markerPerson,c.circle,c.polyline,c.markers=[],c.centerPositionNum=0,c.mapPositionObj=null,c.fun={},n()}angular.module("app.map").controller("MapController",e),e.$inject=["CommonMapService","MapService","$ionicPopup","AddAssessmentMapService"]}(),function(){"use strict";function e(e){e.state("map",{url:"/map",templateUrl:"templates/map/map.html"})}angular.module("app.map").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){function t(t,a){var o="/hwweb/Ledger/findMap.action?code="+t.type+"&name="+t.keyword;e.getCommonData(o,a)}var a={getAccountList:t};return a}angular.module("app.map").service("MapService",e),e.$inject=["MyHttpService"]}(),function(){"use strict";function e(e,t,a){function o(){t.getMessagesByUserId(a.userId,function(e){s.messages=e})}function n(e){}function i(){s.messages=[];var o="";a.userId&&(o=a.userId),t.doRefresh(o,function(t){s.messages=t,e.$apply()},function(){e.$broadcast("scroll.refreshComplete")})}var s=this;s.title="已收到消息",s.refreshMessageList=i,s.openMsgContent=n,s.fun={refreshMessageList:i},s.messages=[],o()}angular.module("app.appReceivedMessage").controller("MessageController",e),e.$inject=["$scope","MessageService","$rootScope"]}(),function(){"use strict";function e(e){e.state("recMessage",{url:"/recMessage",templateUrl:"templates/message/recMessage.html"})}angular.module("app.appReceivedMessage").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,a){function o(t,a){var o="/hwweb/AppMessage/findMsgByUserId.action?userId=123";e.getCommonData(o,a)}function n(e,o,n){var i=t.SERVER_PATH+":"+t.SERVER_PORT+"/hwweb/AppMessage/findMsgByUserId.action?userId=123";a.get(i).success(function(e){o(e)}).finally(function(){n()})}var i={getMessagesByUserId:o,doRefresh:n};return i}angular.module("app.appReceivedMessage").service("MessageService",e),e.$inject=["MyHttpService","SYS_INFO","$http"]}(),function(){"use strict";function e(e,t,a,o,n){function i(){n.getProblemList(e.userId,function(e){l.problemList=e})}function s(e){c(e)}function r(e){c(e)}function c(e){t.go("problemFeedbackDetails",{problemItem:e,fromWhere:"problemFeedback"})}var l=this;l.title="已收到的检查问题",l.fun={checkProblemDetails:s,feedbackProblem:r},l.problemList=[],i()}angular.module("app.problemFeedback").controller("ProblemFeedbackController",e),e.$inject=["$rootScope","$state","$ionicPopup","$scope","ProblemFeedbackService"]}(),function(){"use strict";function e(e){e.state("problemFeedback",{url:"/problemFeedback",templateUrl:"templates/problemFeedback/problemFeedback.html"})}angular.module("app.problemFeedback").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){function t(t,a){var o="/hwweb/GridInspection/CheckProblem.action?userId="+t;e.getCommonData(o,a)}var a={getProblemList:t};return a}angular.module("app.problemFeedback").service("ProblemFeedbackService",e),e.$inject=["MyHttpService"]}(),function(){"use strict";function e(e,t,a,o,n){e.netSetList=[{placeholderValue:"服务器地址：",value:a.SERVER_PATH},{placeholderValue:"服务器端口：",value:a.SERVER_PORT}],e.IMEI=n.imei,e.setNet=function(){t.saveNetSettings(e.netSetList[0].value,e.netSetList[1].value,function(){o.goBack()})},e.backToLogin=function(){o.goBack()}}angular.module("app.setNet").controller("SetNetController",e),e.$inject=["$scope","SetNetService","SYS_INFO","$ionicHistory","$stateParams"]}(),function(){function e(e){e.state("setNet",{url:"/setNet",params:{imei:""},cache:!1,controller:"SetNetController",templateUrl:"templates/setNet/net.html"})}angular.module("app.setNet").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){function a(a,o,n){var i={SERVER_PATH:a,SERVER_PORT:o};e.serverInfo=i,t.SERVER_PATH=i.SERVER_PATH,t.SERVER_PORT=i.SERVER_PORT,n()}var o={saveNetSettings:a};return o}angular.module("app.setNet").service("SetNetService",e),e.$inject=["$localStorage","SYS_INFO"]}(),function(){"use strict";function e(e,t,a){function o(){a.getWeather(function(e){n.weather=e})}var n=this;n.title="个人信息",n.group=e.userOrg,n.name=e.userName,n.weather={},o()}angular.module("app.setting").controller("SettingController",e),e.$inject=["$rootScope","$scope","GetWeatherService"]}(),function(){"use strict";function e(e){e.state("setting",{url:"/setting",templateUrl:"templates/setting/setting.html"})}angular.module("app.setting").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){var t={};return t}angular.module("app.setting").service("userInfoService",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,t,a,o){function n(){console.log(a.userId),t.getWaitForWorkInfo(a.userId,function(e){s.workList=e,console.log(s.workList)})}function i(e){"无"==e.sDate?o.go("problemFeedbackDetails",{problemItem:e,fromWhere:"waitForWork"}):o.go("planDetails",{planDetailsData:e,fromWhere:"waitForWork"})}var s=this;s.title="待办工作",s.titleController={},s.workList=[],s.toJobDetails=i,n()}angular.module("app.waitForWork").controller("WaitForWorkController",e),e.$inject=["$scope","WaitForWorkService","$rootScope","$state"]}(),function(){"use strict";function e(e){e.state("waitForWork",{url:"/waitForWork",templateUrl:"templates/waitForWork/waitForWork.html"})}angular.module("app.waitForWork").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,a,o,n,i,s,r,c,l){function u(t,a){var o="/hwweb/AssignmentAssessment/findDataByUserId?userId="+t;e.getCommonData(o,a)}var p={getWaitForWorkInfo:u};return p}angular.module("app.waitForWork").service("WaitForWorkService",e),e.$inject=["MyHttpService","$localStorage","$http","SYS_INFO","$timeout","$ionicLoading","$ionicPopup","$rootScope","$cordovaDevice","$state"]}(),function(){"use strict";function e(e,t,a){function o(){null!=a.accountData&&(n.accountDetailsData=a.accountData),null!=a.code&&(n.code=a.code)}var n=this;n.data={},n.installationName="",n.code="",n.accountDetailsData={},o()}angular.module("app.accountDetails").controller("AccountDetailsController",e),e.$inject=["$scope","AccountDetailsService","$stateParams"]}(),function(){"use strict";function e(e){e.state("accountDetails",{url:"/accountDetails",params:{accountData:null,code:null},templateUrl:"templates/account/accountDetails/accountDetails.html"})}angular.module("app.accountDetails").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){var a={};return a}angular.module("app.accountDetails").service("AccountDetailsService",e),e.$inject=["$http","MyHttpService"]}(),function(){"use strict";function e(e,t,a,o,n){function i(){a.addAssessmentData&&(m.addAssessmentData=a.addAssessmentData),u()}function s(){t.go("addAssessmentMap",{mapPositionObj:m.mapPositionObj,from:"addAssessment"})}function r(){var e={quality:100,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.CAMERA,allowEdit:!0,encodingType:Camera.EncodingType.JPEG,targetWidth:100,targetHeight:100,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!0,correctOrientation:!0};$cordovaCamera.getPicture(e).then(function(e){m.picBase64DataArray.splice(0,m.picBase64DataArray.length),m.uploadData.img.splice(0,m.uploadData.img.length),m.picBase64DataArray.push("data:image/jpeg;base64,"+e),m.uploadData.img.push(e)},function(e){$ionicPopup.alert({title:"拍照失败，请重试！"})})}function c(){o.queryAccountList(m.queryCriteria,function(e){m.accountList=e,e.length>0?m.spinnerShow=!0:m.spinnerShow=!1})}function l(e){switch(e.type){case"01":m.accountObj.wcCondition=e.condition;break;case"02":break;case"05":m.accountObj.level=e.cleanLevel,m.accountObj.length=e.length,m.accountObj.road=e.primaryOrSecondary,m.accountObj.width=e.width;break;case"06":m.accountObj.carCondition=e.condition}m.spinnerShow=!1,m.queryCriteria.address=e.name,m.mapPositionObj=e,m.infraId=e.id}function u(){n.getAccounts(null,function(e){m.pointReasonArray=e,m.uploadData.reason=m.pointReasonArray[0].name})}function p(e){$ionicPopup.confirm({title:"提示",template:"您确定要删除此照片么？"}).then(function(t){t&&(m.picBase64DataArray.splice(e,1),m.uploadData.img.splice(e,1))})}function d(){if(""==m.uploadData.points)$ionicPopup.alert({title:"扣分情况不能为空"});else if(""==m.uploadData.reason)$ionicPopup.alert({title:"扣分原因不能为空"});else if(""==m.uploadData.remark)$ionicPopup.alert({title:"备注不能为空"});else{var t={planId:"",infraId:""};t.planId=m.addAssessmentData.id,t.infraId=m.infraId;var a=JSON.stringify(t);o.uploadAccountData(a,function(t){if(t){var a={infoId:"",planId:"",infraId:"",dItemName:"",score:"",userName:"",remark:"",imgJson:[]};a.infoId=t[0],a.planId=m.addAssessmentData.id,a.infraId=m.infraId,a.dItemName=m.uploadData.reason,a.score=m.uploadData.points,a.userName=e.userName,a.remark=m.uploadData.remark,a.imgJson=m.uploadData.img;var n=JSON.stringify(a);o.uploadPointAndPicData(n,function(e){})}})}}var m=this;m.data={},m.title="录入计划",m.spinnerShow=!1,m.picBase64DataArray=[],m.infraId="",m.uploadData={level:"",road:"",length:"",points:"",width:"",reason:"",remark:"",img:[]},m.addAssessmentData={},m.queryCriteria={type:"",address:""},m.pointReasonArray=[],m.accountList=[],m.facilityTypeList=[{name:"公厕",type:"01"},{name:"转运站",type:"02"},{name:"道路",type:"05"},{name:"车辆",type:"06"}],m.accountObj={level:"",road:"",length:"",width:"",wcCondition:"",carCondition:""},m.mapPositionObj={},m.fun={toAddAssessmentMap:s,takePicture:r,spinnerHide:l,deletePic:p,queryAccountList:c,uploadDataFun:d},i()}angular.module("app.addAssessment").controller("AddAssessmentController",e),e.$inject=["$rootScope","$state","$stateParams","AddAssessmentService","AssessmentStatusDetailsService"]}(),function(){"use strict";function e(e){e.state("addAssessment",{url:"/addAssessment",params:{addAssessmentData:null},templateUrl:"templates/assessment/addAssessment/addAssessment.html"})}angular.module("app.addAssessment").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){function a(e,t,a,o){}function o(){document.addEventListener("deviceready",function(){var t={quality:50,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.CAMERA,allowEdit:!0,encodingType:Camera.EncodingType.JPEG,targetWidth:100,targetHeight:100,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!1,correctOrientation:!0};e.getPicture(t).then(function(e){var t=document.getElementById("myImage");t.src="data:image/jpeg;base64,"+e},function(e){})},!1)}function n(){document.addEventListener("deviceready",function(){var t={destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA};e.getPicture(t).then(function(e){var t=document.getElementById("myImage");t.src=e},function(e){}),e.cleanup().then()},!1)}function i(e,a){var o="/hwweb/Comprehensive/searchFacilities.action?name="+e.address+"&typeId="+e.type;
t.getCommonData(o,a)}function s(e,a){var o="/hwweb/AssignmentAssessment/comprehensive.action";t.uploadCommonData(o,e,a)}function r(e,a){var o="/hwweb/AssignmentAssessment/reportPro.action";t.uploadCommonData(o,e,a)}var c={addNewAssessment:a,getPhonePictureData:o,getPhonePicturePath:n,queryAccountList:i,uploadAccountData:s,uploadPointAndPicData:r};return c}angular.module("app.addAssessment").service("AddAssessmentService",e),e.$inject=["$cordovaCamera","MyHttpService"]}(),function(){"use strict";function e(e,t,a,o,n,i,s){function r(){o.planDetailsData&&(p.data=o.planDetailsData,console.log(p.data),n.getAssessmentStatusList(p.data,function(e){p.assessmentStatusList=e})),t.$on("$ionicView.beforeEnter",function(e){n.getAssessmentStatusList(p.data,function(e){p.assessmentStatusList=e})})}function c(){null!=p.data&&(null==p.data.status||0==p.data.status?n.checkOverAndUpload(p.data):s.alert({title:"该考核任务已经完成！"}).then(function(e){}))}function l(){null!=p.data&&(null==p.data.status||0==p.data.status?a.go("assessmentStatusDetails",{assessmentStatusData:p.data,isEdit:!0}):s.alert({title:"该考核任务已经完成！"}).then(function(e){}))}function u(e){e.typeId=p.data.typeId,e.infraId=p.data.infraId,a.go("assessmentStatusDetails",{assessmentStatusData:e,isEdit:!1})}var p=this;p.title="考核情况",p.data={},p.fun={toAssessmentStatusDetails:l,upload:c,checkStatusDetails:u},p.assessmentStatusList=[],r()}angular.module("app.assessmentStatus").controller("AssessmentStatusController",e),e.$inject=["$rootScope","$scope","$state","$stateParams","AssessmentStatusService","$ionicLoading","$ionicPopup"]}(),function(){"use strict";function e(e){e.state("assessmentStatus",{url:"/assessmentStatus",params:{planDetailsData:null},cache:!0,templateUrl:"templates/assessment/assessmentStatus/assessmentStatus.html"})}angular.module("app.assessmentStatus").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,a,o,n,i){function s(e,t){var o="/hwweb/AssignmentAssessment/findProView.action?planId="+e.planId+"&infrastructureId="+e.infraId+"&infoId="+e.id;a.getCommonData(o,t)}function r(a){o.show({template:'<div class="common-loading-dialog-center">  <ion-spinner icon="ios"></ion-spinner>&nbsp;&nbsp;  <span>数据上传中...</span></div>',duration:1e4});var s="/hwweb/AssignmentAssessment/complete.action?planId="+a.planId+"%infraId="+a.infraId;e({method:"GET",url:t.SERVER_PATH+":"+t.SERVER_PORT+s}).then(function(e){1==e.data.success&&n.alert({title:"提示",template:"考核完成..."}).then(function(e){i.goBack()})},function(e){n.alert({title:"失败提示",template:"上传失败，请重试！"}).then(function(e){})})}var c={getAssessmentStatusList:s,checkOverAndUpload:r};return c}angular.module("app.assessmentStatus").service("AssessmentStatusService",e),e.$inject=["$http","SYS_INFO","MyHttpService","$ionicLoading","$ionicPopup","$ionicHistory"]}(),function(){"use strict";function e(e,t,a,o,n,i,s,r,c,l){function u(){A.isEdit=n.isEdit,A.serverUrl=t.SERVER_PATH+":"+t.SERVER_PORT+"/hwweb",n.assessmentStatusData&&(A.data=n.assessmentStatusData,A.title=n.assessmentStatusData.name,console.log(A.data),A.isEdit?(g(),i.getAssessmentStatusDetailsListIsEdit(A.data,function(e){A.assessmentStatusDetails=e[0],A.assessmentStatusDetails&&(A.type=A.assessmentStatusDetails.type)})):i.getAssessmentStatusDetailsListNotEdit(A.data,function(e){A.assessmentStatusDetails=e[0],A.assessmentStatusDetails&&(A.type=A.assessmentStatusDetails.type,A.uploadData.points=A.assessmentStatusDetails.deducted,A.uploadData.reason=A.assessmentStatusDetails.dItem,A.uploadData.remarks=A.assessmentStatusDetails.remarks,A.picBase64DataArray=A.assessmentStatusDetails.imgs)}))}function p(){if(""==A.uploadData.points)r.alert({title:"扣分情况不能为空"});else if(""==A.uploadData.reason)r.alert({title:"扣分原因不能为空"});else if(""==A.uploadData.remark)r.alert({title:"备注不能为空"});else{var t={infoId:"",planId:"",infraId:"",dItemName:"",score:"",userName:"",remark:"",imgJson:[]};t.infoId=A.data.id,t.planId=A.data.planId,t.infraId=A.data.infraId,t.dItemName=A.uploadData.reason,t.score=A.uploadData.points,t.userName=e.userName,t.remark=A.uploadData.remark,t.imgJson=A.uploadPicBase64DataArray,i.uploadAssessmentStatusDetailsData(t,function(e){l.goBack()})}}function d(){if(A.picBase64DataArray.length>=3)r.alert({title:"最多支持上传三张图片"}).then(function(){});else{var e={quality:100,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.CAMERA,allowEdit:!1,encodingType:Camera.EncodingType.JPEG,targetWidth:200,targetHeight:200,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!0,correctOrientation:!0};c.getPicture(e).then(function(e){var t=moment().format("YYYY-MM-DD HH:mm:ss")+".jpg";A.picNameArray.push(t),A.picBase64DataArray.push("data:image/jpeg;base64,"+e),A.uploadPicBase64DataArray.push(e)},function(e){})}}function m(){o.go("addAssessmentMap",{mapPositionObj:A.assessmentStatusDetails,from:"assessmentStatusDetails"})}function g(){i.getAccounts(A.data,function(e){A.reasonAccount=e,A.uploadData.reason=A.reasonAccount[0].name,console.log("扣分原因数据："),console.log(A.reasonAccount)})}function f(e){A.picBase64DataArray.splice(e,1),A.uploadPicBase64DataArray.push(e,1),A.picNameArray.push(e,1)}var A=this;A.data={},A.title="",A.type="05",A.isEdit=!1,A.assessmentStatusDetails={},A.reasonAccount=[],A.picBase64DataArray=[],A.serverUrl="",A.uploadPicBase64DataArray=["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"],A.picNameArray=[],A.uploadData={points:"",reason:"",remarks:""},A.fun={uploadAssessmentStatusDetailsData:p,toCommonMap:m,takePicture:d,deletePic:f},u()}angular.module("app.assessmentStatusDetails").controller("AssessmentStatusDetailsController",e),e.$inject=["$rootScope","SYS_INFO","$scope","$state","$stateParams","AssessmentStatusDetailsService","$ionicLoading","$ionicPopup","$cordovaCamera","$ionicHistory"]}(),function(){"use strict";function e(e){e.state("assessmentStatusDetails",{url:"/assessmentStatusDetails",params:{assessmentStatusData:null,isEdit:!1},templateUrl:"templates/assessment/assessmentStatusDetails/assessmentStatusDetails.html"})}angular.module("app.assessmentStatusDetails").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){function t(t,a){var o="/hwweb/AssignmentAssessment/findFacilities.action?typeId="+t.typeId+"&infraId="+t.infraId;e.getCommonData(o,a)}function a(t,a){var o="/hwweb/AssignmentAssessment/findFacilitiesViews.action?typeId="+t.typeId+"&infraId="+t.infraId+"&resultsId="+t.id;e.getCommonData(o,a)}function o(t,a){if(t)var o="/hwweb/AssignmentAssessment/findDItem.action?typeId="+t.typeId;else var o="/hwweb/AssignmentAssessment/findDItem.action";e.getCommonData(o,a)}function n(t,a){var o="/hwweb/AssignmentAssessment/reportPro.action",n=JSON.stringify(t);e.uploadCommonData(o,n,a)}var i={getAssessmentStatusDetailsListIsEdit:t,getAssessmentStatusDetailsListNotEdit:a,getAccounts:o,uploadAssessmentStatusDetailsData:n};return i}angular.module("app.assessmentStatusDetails").service("AssessmentStatusDetailsService",e),e.$inject=["MyHttpService"]}(),function(){"use strict";function e(e,t,a,o,n){function i(){o.planDetailsData&&(c.data=o.planDetailsData,c.title=o.planDetailsData.planName),n.getPlanDetailsList(c.data.id,function(e){c.planDetailsList=e})}function s(){if(c.data.id){var e={id:c.data.id};a.go("addAssessment",{addAssessmentData:e})}}function r(e){e.planId=c.data.id,a.go("assessmentStatus",{planDetailsData:e})}var c=this;c.data={},c.title="",c.fun={toAddAssessment:s},c.toAssessmentStatus=r,c.planDetailsList=[],i()}angular.module("app.planDetails").controller("PlanDetailsController",e),e.$inject=["$rootScope","$scope","$state","$stateParams","PlanDetailsService"]}(),function(){"use strict";function e(e){e.state("planDetails",{url:"/assessment/planDetails",params:{planDetailsData:null},cache:!1,templateUrl:"templates/assessment/planDetails/planDetails.html"})}angular.module("app.planDetails").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){function t(t,a){var o="/hwweb/AssignmentAssessment/findPlanView.action?planId="+t;e.getCommonData(o,a)}var a={getPlanDetailsList:t};return a}angular.module("app.planDetails").service("PlanDetailsService",e),e.$inject=["MyHttpService"]}(),function(){"use strict";function e(e,t,a,o){function n(n,i){console.log(o.SERVER_PATH+":"+o.SERVER_PORT+n);var s=[];t.show({templateUrl:"templates/common/common.loadingData.html",duration:2e4}),e({method:"GET",url:o.SERVER_PATH+":"+o.SERVER_PORT+n}).then(function(e){1==e.data.success?(t.hide(),s=e.data.data,console.log("数据获取成功"),console.log(s),i(s)):(t.hide(),a.alert({title:"提示",template:"获取数据失败"}).then(function(e){console.log("数据获取失败"),console.log(s),i(s)}))},function(e){t.hide(),a.alert({title:"提示",template:"获取数据失败"}).then(function(e){console.log("通信异常"),console.log(s),i(s)})})}function i(n,i,s){t.show({template:'<div class="common-loading-dialog-center">  <ion-spinner icon="ios"></ion-spinner>&nbsp;&nbsp;  <span>数据上传中...</span></div>',duration:1e4});var r=o.SERVER_PATH+":"+o.SERVER_PORT+n;console.log(r),console.log(i),e({method:"post",url:r,data:{data:i},headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(e){var t=[];for(var a in e)t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")}}).then(function(e){if(e.data.success=1){var o=e.data.data;t.hide(),a.alert({title:"提示",template:e.data.msg}).then(function(e){s(o)})}else t.hide(),a.alert({title:"数据上传失败"})},function(e){t.hide(),a.alert({title:"数据上传失败"})})}var s={getCommonData:n,uploadCommonData:i};return s}angular.module("app.commonHttpService").service("MyHttpService",e),e.$inject=["$http","$ionicLoading","$ionicPopup","SYS_INFO"]}(),function(){"use strict";function e(e,t,a,o){function n(){switch(r.fromWhere){case"gridCheck":null==r.data||void 0==r.data?o.initMap():(r.map=o.initMap(),o.getCoordinateInfo(function(e){r.marker=o.initMyPosition(r.map,e),r.map.on("click",function(e){marker.setPosition(e.lnglat),r.postion=e.lnglat,console.log(e.lnglat)})}));break;case"addAssessment":}}function i(){o.getCoordinateInfo(function(e){r.marker.setPosition(e),r.map.setZoom(12),r.map.setCenter(e)})}function s(){$state.go("gridCheck",{position:r.postion})}var r=this;r.data={},r.title="地图详情",r.fun={},r.data=a.data,r.fromWhere=a.from,r.map,r.marker,r.postion=[],r.fun={refreshMyPosition:i,sendPosition:s},n()}angular.module("app.commonMap").controller("CommonMapController",e),e.$inject=["$rootScope","$scope","$stateParams","CommonMapService"]}(),function(){"use strict";function e(e){e.state("commonMap",{url:"/commonMap",params:{data:null,from:""},templateUrl:"templates/common/map/commonMap.html"})}angular.module("app.commonMap").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,a,o,n){function i(){t.show({template:'<div class="common-loading-dialog-center">  <ion-spinner icon="ios"></ion-spinner>&nbsp;&nbsp;  <span>地图数据加载中...</span></div>',duration:5e3});var e=new AMap.Map("map",{resizeEnable:!0,zoom:12,lang:"zh_cn"});return e.plugin(["AMap.ToolBar"],function(){var t=new AMap.ToolBar;e.addControl(t)}),t.hide(),e}function s(e){t.show({template:'<div class="common-loading-dialog-center">  <ion-spinner icon="ios"></ion-spinner>&nbsp;&nbsp;  <span>地图数据加载中...</span></div>',duration:5e3});new AMap.Map("map");map.setZoom(10),map.setCenter([116.39,39.9]),t.hide()}function r(e,a){t.show({template:'<div class="common-loading-dialog-center">  <ion-spinner icon="ios"></ion-spinner>&nbsp;&nbsp;  <span>地图数据加载中...</span></div>',duration:2e4});var a=new AMap.LngLat(116.397428,39.90923);new AMap.Map("map",{view:new AMap.View2D({center:a,zoom:10,rotation:0}),lang:"zh_cn"});t.hide()}function c(e,t){e.setCenter(t);var a=new AMap.Marker({position:t});return a.setMap(e),a.setTitle("我的位置"),a}function l(e){t.show({template:'<div class="common-loading-dialog-center">  <ion-spinner icon="ios"></ion-spinner>&nbsp;&nbsp;  <span>定位中...</span></div>',duration:1e4});var a=new Array;n.getCurrentPosition({timeout:1e4,enableHighAccuracy:!1}).then(function(o){a[0]=o.coords.longitude,a[1]=o.coords.latitude,e(a),t.hide(),console.log("Cordova使用GPS定位成功："),console.log(a)},function(o){a[0]=120.413762,a[1]=36.084807,e(a),t.hide(),console.log("Cordova使用GPS定位失败，定位地点已经设为垃管处的地理位置："),console.log("失败码："+o.code),console.log("失败信息"+o.msg)})}function u(e){var t={};return AMap.plugin("AMap.Geocoder",function(){var a=new AMap.Geocoder({city:"010"});a.getAddress(e,function(e,a){return"complete"==e?(t.address=a.regeocode.formattedAddress,t.city=a.regeocode.addressComponent.city,t.district=a.regeocode.addressComponent.city+a.regeocode.addressComponent.district,t.street=a.regeocode.addressComponent.street,t.township=a.regeocode.addressComponent.township,t.streetNumber=a.regeocode.addressComponent.streetNumber,console.log("根据经纬度来获取定位地点返回的数据："),console.log(a),console.log("根据经纬度来获取定位地点的的各种信息:"),console.log(t),t):t})}),t}function p(e,t){var a="";AMap.plugin("AMap.Geocoder",function(){var o=new AMap.Geocoder({city:"010"});o.getAddress(e,function(e,o){"complete"==e?(a=o.regeocode.formattedAddress,t(a)):t(a),console.log("根据经纬度来获取详细的地理位置："),console.log(o)})})}function d(e){t.show({template:'<div class="common-loading-dialog-center">  <ion-spinner icon="ios"></ion-spinner>&nbsp;&nbsp;  <span>定位中...</span></div>',duration:1e4});var o=[];n.getCurrentPosition({timeout:1e4,enableHighAccuracy:!1}).then(function(a){o[0]=a.coords.longitude,o[1]=a.coords.latitude,t.hide(),console.log("定位成功，坐标数组："+o),AMap.plugin("AMap.Geocoder",function(){var t=new AMap.Geocoder({city:"010"});t.getAddress(o,function(t,a){if("complete"==t){var o={};o.district=a.regeocode.addressComponent.city+a.regeocode.addressComponent.district,o.street=a.regeocode.addressComponent.street,e(o),console.log("根据经纬度来获取定位地点返回的数据："),console.log(a),console.log("根据经纬度来获取定位地点的的各种信息:"),console.log(o)}else console.log("根据经纬度来获取定位地点失败！")})})},function(o){t.hide();var n={};n.district="",n.street="",e(n),a.alert({title:"定位失败，请重试！"})})}var m={initMap:i,initRoadMap:s,initInstallationMap:r,initMyPosition:c,getCoordinateInfo:l,getAddressByLatitudeAndLongitude:u,getAddressByGPS:d,getLocationByLatitudeAndLongitude:p};return m}angular.module("app.commonMap").service("CommonMapService",e),e.$inject=["$http","$ionicLoading","$ionicPopup","SYS_INFO","$cordovaGeolocation"]}(),function(){"use strict";function e(e,t,a,o,n,i,s){function r(){u.map=o.initMap(),o.getCoordinateInfo(function(e){u.position=e,u.map.setZoom(15),u.marker=o.initMyPosition(u.map,e),o.getLocationByLatitudeAndLongitude(e,function(e){u.address=e}),u.map.on("click",function(e){u.marker.setPosition(e.lnglat),u.position=e.lnglat,o.getLocationByLatitudeAndLongitude(e.lnglat,function(e){u.address=e,t.$apply()}),console.log("通过在地图上选点获取到的坐标："),console.log(e.lnglat),console.log("通过在地图上选点获取的详细地址："),console.log(u.address)})})}function c(){o.getCoordinateInfo(function(e){u.position=e,u.marker.setPosition(e),u.map.setZoom(15),u.map.setCenter(e),o.getLocationByLatitudeAndLongitude(e,function(e){u.address=e})})}function l(){if(i.get("cacheGridCheckMapData"))console.log("$cacheFactory:cacheGridCheckMapData"),console.log(i.get("cacheGridCheckMapData")),i.get("cacheGridCheckMapData").destroy();else{var e=i("cacheGridCheckMapData");e.put("position",u.position),e.put("address",u.address),console.log("存储在本地的定位的相关数据："),console.log(e),s.goBack()}}var u=this;u.title="地图详情",u.map=null,u.marker=null,u.position=[],u.address="",u.fun={refreshMyPosition:c,sendPosition:l},r()}angular.module("app.gridCheckMap").controller("GridCheckMapController",e),e.$inject=["$rootScope","$scope","$stateParams","CommonMapService","$state","$cacheFactory","$ionicHistory"]}(),function(){"use strict";function e(e){e.state("gridCheckMap",{url:"/gridCheckMap",params:{mapData:null},cache:!0,templateUrl:"templates/gridCheck/gridCheckMap/gridCheckMap.html"})}angular.module("app.gridCheckMap").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,a,o,n,i,s,r,c){function l(){d.savedData=c.getSavedUploadedData()}function u(e){}function p(e){}var d=this;d.title="本地内容",d.savedData={data:[{time:"2017/8/10/pm8:00",address:"山东路",points:"-1",reason:"道路不净",remark:"这是备注",img:[]},{time:"2017/8/10/pm6:00",address:"银川路",points:"-2",reason:"垃圾桶占路",remark:"这是备注",img:[]},{time:"2017/8/10/pm9:00",address:"镇江路",points:"-1",reason:"道路不净",remark:"这是备注",img:[]},{time:"2017/8/10/pm10:00",address:"江西路",points:"-2",reason:"垃圾桶占路",remark:"这是备注",img:[]}]},d.fun={uploadData:u,deleteSavedData:p},l()}angular.module("app.savedData").controller("SavedDataController",e),e.$inject=["$scope","$state","$filter","Session","homeService","SYS_INFO","GetWeather","$stateParams","SavedDataService"]}(),function(){"use strict";function e(e){e.state("savedData",{url:"/savedData",cache:!0,params:{savedData:null},templateUrl:"templates/home/savedData/savedData.html"})}angular.module("app.savedData").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,a,o,n,i){function s(){if(i.savedData)return i.savedData}function r(e){}function c(){}var l={getSavedUploadedData:s,uploadData:r,deleteSavedData:c};return l}angular.module("app.savedData").service("SavedDataService",e),e.$inject=["$http","SYS_INFO","Session","$interval","$localStorage","$stateParams"]}(),function(){"use strict";function e(e,t,a){function o(){a.msgId&&(i.msgId=a.msgId),n()}function n(){t.getMessagesByMsgId(i.msgId,function(e){e[0]&&(i.msgView=e[0].msgView[0],i.msg=e[0].msg[0])})}var i=this;i.title="消息详情",i.msgView={},i.msg={},i.msgId="",o()}angular.module("app.messageContent").controller("MessageContentController",e),e.$inject=["$scope","MessageContentService","$stateParams"]}(),function(){"use strict";function e(e){e.state("messageContent",{url:"/messageContent/:msgId",templateUrl:"templates/message/messageContent/messageContent.html"})}angular.module("app.messageContent").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){function t(t,a){var o="/hwweb/AppMessage/msgView.action?msgId=12";e.getCommonData(o,a)}var a={getMessagesByMsgId:t};return a}angular.module("app.messageContent").service("MessageContentService",e),e.$inject=["MyHttpService"]}(),function(){"use strict";function e(e,t,a,o,n,i){function s(){switch(a.problemItem&&(u.data=a.problemItem),a.fromWhere&&(u.fromWhere=a.fromWhere),u.fromWhere){case"waitForWork":o.getProblemDetailsData(u.data,function(e){0==e.length||(u.problemDetails=e[0]),o.getProblemFeedbackDetailsMap(u.problemDetails)});break;case"problemFeedback":u.problemDetails=a.problemItem,o.getProblemFeedbackDetailsMap(u.problemDetails);break;default:o.getProblemFeedbackDetailsMap(u.problemDetails)}}function r(){var e={quality:100,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.CAMERA,allowEdit:!0,encodingType:Camera.EncodingType.JPEG,targetWidth:200,targetHeight:200,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!0,correctOrientation:!0};$cordovaCamera.getPicture(e).then(function(e){var t=document.getElementById("problemFeedbackDetailsImg");t.src="data:image/jpeg;base64,"+e,u.imgPath=moment().format("YYYY-MM-DD HH:mm:ss")+".jpeg",u.uploadData.img=e},function(e){n.alert({title:"照片获取失败，请重新拍照!"})})}function c(){u.uploadData.id=u.problemDetails.id,u.uploadData.planId=u.problemDetails.planId,u.uploadData.feedbackUser=t.userName,""==u.uploadData.id||""==u.uploadData.planId||""==u.uploadData.feedbackUser?n.alert({title:"提示信息",template:"数据不全无法上传数据！"}):""!=u.uploadData.feedbackDescription&&""!=u.uploadData.img||n.confirm({title:"提示信息",template:"整改情况未填或者没有拍照，确认要上传么？"}).then(function(e){e&&o.uploadProblemFeedbackData(u.uploadData,function(e){i.goBack()})})}function l(){n.confirm({title:"提示信息",template:"确认要删除这张照片么？"}).then(function(e){if(e){u.uploadData.img="";var t=document.getElementById("problemFeedbackDetailsImg");t.src=""}})}var u=this;u.title="问题详情",u.fromWhere="",u.data={},u.problemDetails={id:"",planId:""},u.footerContent="确定",u.fun={initCamera:r,uploadProblemFeedbackData:c,deletePic:l},u.uploadData={id:"",planId:"",feedbackDescription:"",feedbackUser:"",img:""},u.imgPath="",s()}angular.module("app.problemFeedbackDetails").controller("ProblemFeedbackDetailsController",e),e.$inject=["$scope","$rootScope","$stateParams","ProblemFeedbackDetailsService","$ionicPopup","$ionicHistory"]}(),function(){"use strict";function e(e){e.state("problemFeedbackDetails",{url:"/problemFeedbackDetails",params:{problemItem:null,fromWhere:""},templateUrl:"templates/problemFeedback/problemFeedbackDetails/problemFeedbackDetails.html"})}angular.module("app.problemFeedbackDetails").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){function a(e){console.log("问题饭详情页面的相关数据"),console.log(e);var a=t.getPositionArray(e.point);a=a.length<=0?null:a[0],console.log("问题饭详情页面设施坐标"),console.log(a);var o=new AMap.Map("problemFeedbackDetailsMap",{resizeEnable:!0,zoom:15,center:a});new AMap.Marker({position:a,map:o});o.plugin(["AMap.ToolBar"],function(){var e=new AMap.ToolBar;o.addControl(e)})}function o(t,a){var o="/hwweb/GridInspection/CheckProblemById.action?planId="+t.id;e.getCommonData(o,a)}function n(t,a){var o="/hwweb/GridInspection/UploadProblem.action",n=JSON.stringify(t);e.uploadCommonData(o,n,a)}var i={getProblemFeedbackDetailsMap:a,uploadProblemFeedbackData:n,getProblemDetailsData:o};return i}angular.module("app.problemFeedbackDetails").service("ProblemFeedbackDetailsService",e),e.$inject=["MyHttpService","AddAssessmentMapService"]}(),function(){"use strict";function e(e,t,a,o,n,i){function s(){switch(o.from?u.from=o.from:u.from="addAssessment",u.from){case"addAssessment":o.mapPositionObj&&(console.log(o.mapPositionObj),o.mapPositionObj.name&&(u.mapPositionObj.address=o.mapPositionObj.name),u.mapPositionObj.position=i.getPositionArray(o.mapPositionObj.point)),console.log(u.mapPositionObj);break;case"assessmentStatusDetails":o.mapPositionObj&&(console.log(o.mapPositionObj),u.mapPositionObj.address=o.mapPositionObj.name,u.mapPositionObj.position=i.getPositionArray(o.mapPositionObj.point)),console.log(u.mapPositionObj)}r()}function r(){if(u.map=n.initMap(),u.markerPerson=new AMap.Marker,n.getCoordinateInfo(function(e){u.markerPerson.setPosition(e),u.markerPerson.setMap(u.map)}),1==u.mapPositionObj.position.length){var e=new AMap.Icon({size:new AMap.Size(20,25),image:"../assets/global/map/marker.png",imageOffset:new AMap.Pixel(0,0)});u.marker=new AMap.Marker({
position:u.mapPositionObj.position[0],icon:e}),u.marker.setMap(u.map),u.map.setCenter(u.mapPositionObj.position[0])}else u.mapPositionObj.position.length>1&&(console.log("走到这里了"),u.polyline=new AMap.Polyline({path:u.mapPositionObj.position,strokeColor:"#1C8B08",strokeWeight:5}),u.polyline.setMap(u.map),u.map.setZoom(13),u.centerPositionNum=parseInt(u.mapPositionObj.position.length/2),u.map.setCenter(u.mapPositionObj.position[u.centerPositionNum]))}function c(){n.getCoordinateInfo(function(e){u.markerPerson.setPosition(e),u.map.setZoom(13),u.markerPerson.setMap(u.map),u.map.setCenter(e)})}function l(){1==u.mapPositionObj.position.length?u.map.setCenter(u.mapPositionObj.position[0]):u.mapPositionObj.position.length>1&&u.map.setCenter(u.mapPositionObj.position[u.centerPositionNum])}var u=this;u.data={},u.title="地图详情",u.from="",u.map,u.marker,u.markerPerson,u.polyline,u.centerPositionNum=0,u.fun={refreshMyPosition:c,refreshRoadOrInstallationPosition:l},u.mapPositionObj={address:"",position:[]},s()}angular.module("app.addAssessment").controller("AddAssessmentMapController",e),e.$inject=["$rootScope","$scope","$state","$stateParams","CommonMapService","AddAssessmentMapService"]}(),function(){"use strict";function e(e){e.state("addAssessmentMap",{url:"/addAssessmentMap",params:{mapPositionObj:null,from:null},templateUrl:"templates/assessment/addAssessment/addAssessmentMap/addAssessmentMap.html"})}angular.module("app.addAssessmentMap").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(){function e(){}function t(e){var t=[];if(e&&e.indexOf(",")>=0){for(var a=e.split(","),o=0;o<a.length-1;o+=2){var n=new Array;n[0]=a[o],n[1]=a[o+1],t.push(n)}return t}return t}var a={initAddAssessmentMap:e,getPositionArray:t};return a}angular.module("app.addAssessmentMap").service("AddAssessmentMapService",e),e.$inject=[]}();